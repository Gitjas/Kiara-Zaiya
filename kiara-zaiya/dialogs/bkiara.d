BEGIN BKIARA

IF WEIGHT #0 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",2)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 0
  SAY @504 
  IF ~~ THEN REPLY @505 GOTO EP1
  IF ~~ THEN REPLY @506 GOTO EP2
  IF ~~ THEN REPLY @507 GOTO EP3
END

IF ~~ THEN BEGIN EP1
  SAY @508 = @509
  IF ~~ THEN REPLY @510 GOTO EP2
  IF ~~ THEN REPLY @511 GOTO EP2
END

IF ~~ THEN BEGIN EP2
  SAY @512
  IF ~~ THEN REPLY @513 GOTO EP5
  IF ~~ THEN REPLY @514 GOTO EP4
END

IF ~~ THEN BEGIN EP3
  SAY @515
  IF ~~ THEN DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN EP4
  SAY @516
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN EP5
  SAY @517
  IF ~~ THEN REPLY @518 GOTO EP4
  IF ~~ THEN REPLY @514 GOTO EP4
END



IF WEIGHT #1 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",4)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 0
  SAY @519 
  IF ~~ THEN REPLY @520 GOTO 2
  IF ~~ THEN REPLY @521 GOTO 2
  IF ~~ THEN REPLY @522 GOTO 1
END

IF ~~ THEN BEGIN 1
  SAY @523
  IF ~~ THEN DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 2
  SAY @524
  IF ~~ THEN REPLY @525 GOTO 3
  IF ~~ THEN REPLY @526 GOTO 1
END

IF ~~ THEN BEGIN 3
  SAY @527
  IF ~~ THEN REPLY @528 GOTO 4
  IF ~~ THEN REPLY @529 GOTO 1
END

IF ~~ THEN BEGIN 4
  SAY @530
  IF ~~ THEN REPLY @531 GOTO 5
  IF ~~ THEN REPLY @532 GOTO 7
  IF ~~ THEN REPLY @533 GOTO 1
END

IF ~~ THEN BEGIN 5
  SAY @534
  IF ~~ THEN GOTO 6
END

IF ~~ THEN BEGIN 6
  SAY @535 = @536
  IF ~~ THEN REPLY @537 GOTO 7
  IF ~~ THEN REPLY @538 GOTO 1
END

IF ~~ THEN BEGIN 7
  SAY @539
  IF ~~ THEN GOTO 9
END

IF ~~ THEN BEGIN 9
  SAY @540 = @541
  IF ~~ THEN REPLY @542 GOTO 11
  IF ~~ THEN REPLY @543 GOTO 11a
END

IF ~~ THEN BEGIN 10
  SAY @544
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 11
  SAY @545
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 11a
  SAY @546
  IF ~~ THEN EXIT
END


IF WEIGHT #2 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",6)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 12
  SAY @547
  IF ~~ THEN REPLY @548 GOTO 13
  IF ~~ THEN REPLY @549 GOTO 14
END

IF ~~ THEN BEGIN 13
  SAY @550 = @551 = @552
  IF ~~ THEN REPLY @553 GOTO 17
  IF ~~ THEN REPLY @554 GOTO 17
  IF ~~ THEN REPLY @555 GOTO 15
  IF ~~ THEN REPLY @556 GOTO 14
  IF ~~ THEN REPLY @557 GOTO 16
END

IF ~~ THEN BEGIN 14
  SAY @558
  IF ~~ THEN DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 15
  SAY @559
  IF ~~ THEN GOTO 17
END


IF ~~ THEN BEGIN 16
  SAY @560
  IF ~~ THEN REPLY @561 GOTO 17
  IF ~~ THEN REPLY @554 GOTO 17
  IF ~~ THEN REPLY @555 GOTO 15
  IF ~~ THEN REPLY @556 GOTO 14
END


IF ~~ THEN BEGIN 17
  SAY @562 = @563
  IF ~~ THEN REPLY @564 GOTO 18
  IF ~~ THEN REPLY @565 GOTO 19
  IF ~~ THEN REPLY @566 GOTO 20
  IF ~~ THEN REPLY @557 GOTO 16
END

IF ~~ THEN BEGIN 18
  SAY @567 = @568
  IF ~~ THEN REPLY @565 GOTO 19
  IF ~~ THEN REPLY @566 GOTO 20
END

IF ~~ THEN BEGIN 19
  SAY @569
  IF ~~ THEN REPLY @570 GOTO 18
  IF ~~ THEN REPLY @571 GOTO 20
  IF ~~ THEN REPLY @572 GOTO 21
END

IF ~~ THEN BEGIN 20
  SAY @573
  IF ~~ THEN REPLY @574 GOTO 18
  IF ~~ THEN REPLY @575 GOTO 21
  IF ~~ THEN REPLY @576 GOTO 22
  IF ~~ THEN REPLY @577 GOTO 22a 
END

IF ~~ THEN BEGIN 21
  SAY @578
  IF ~~ THEN REPLY @579 GOTO 22
END

IF ~~ THEN BEGIN 22
  SAY @580
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 22a
  SAY @581 = @582 = @583 = @584 = @585
  IF ~~ THEN REPLY @574 GOTO 18
  IF ~~ THEN REPLY @586 GOTO 21
  IF ~~ THEN REPLY @576 GOTO 22
  IF ~~ THEN REPLY @587 GOTO 22
END


IF WEIGHT #3 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",8)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 23
  SAY @588
  IF ~~ THEN REPLY @589 GOTO 24
  IF ~~ THEN REPLY @590 GOTO 24
  IF ~~ THEN REPLY @591 GOTO 25
END

IF ~~ THEN BEGIN 24
  SAY @592 = @593 = @594
  IF ~~ THEN REPLY @595 GOTO 25a
  IF ~~ THEN REPLY @596 GOTO 26
  IF ~~ THEN REPLY @597 GOTO 25a
END

IF ~~ THEN BEGIN 25
  SAY @598
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 25a
  SAY @599
  IF ~~ THEN REPLY @600 GOTO 26
END


IF ~~ THEN BEGIN 26
  SAY @601 = @602 = @603
  IF ~~ THEN REPLY @604 GOTO 27
  IF ~~ THEN REPLY @605 DO ~IncrementGlobal("KM","GLOBAL",-1)~ GOTO 28
END

IF ~~ THEN BEGIN 27
  SAY @606 = @607
  IF ~~ THEN REPLY @608 GOTO 30
  IF ~~ THEN REPLY @609 GOTO 29a
  IF ~~ THEN REPLY @610 GOTO 25
END

IF ~~ THEN BEGIN 28
  SAY @611
  IF ~~ THEN REPLY @612 GOTO 27
  IF ~~ THEN REPLY @613 GOTO 29
  IF ~~ THEN REPLY @614 GOTO 27
  IF ~~ THEN REPLY @615 GOTO 27
END

IF ~~ THEN BEGIN 29
  SAY @616
  IF ~~ THEN REPLY @617 GOTO 27
END

IF ~~ THEN BEGIN 29a
  SAY @618
  IF ~~ THEN GOTO 30
END

IF ~~ THEN BEGIN 30
  SAY @619 = @620 = @621
  IF ~~ THEN REPLY @622 GOTO 31
  IF ~~ THEN REPLY @623 GOTO 31
  IF ~~ THEN REPLY @624 GOTO 31a
  IF ~~ THEN REPLY @625 GOTO 31a
END

IF ~~ THEN BEGIN 31
  SAY @626
  IF ~~ THEN REPLY @627 GOTO 31a
  IF ~~ THEN REPLY @628 GOTO 31b
  IF ~~ THEN REPLY @629 GOTO 31c
  IF ~~ THEN REPLY @630 EXIT
END

IF ~~ THEN BEGIN 31a
  SAY @631
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 31b
  SAY @632
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 31c
  SAY @633
  IF ~~ THEN REPLY @634 EXIT
  IF ~~ THEN REPLY @635 EXIT
END

IF WEIGHT #4 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",10)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 32
  SAY @636
  IF ~~ THEN REPLY @637 GOTO 33
  IF ~~ THEN REPLY @638 GOTO 33
  IF ~~ THEN REPLY @639 GOTO 34
  IF ~~ THEN REPLY @640 GOTO 36
END

IF ~~ THEN BEGIN 33
SAY @641 = @642
  IF ~~ THEN REPLY @643 GOTO 35
  IF ~~ THEN REPLY @644 GOTO 35a
  IF ~~ THEN REPLY @645 GOTO 36
  IF ~~ THEN REPLY @646 GOTO 36
  IF ~~ THEN REPLY @647 GOTO 36
END

IF ~~ THEN BEGIN 34
  SAY @648
  IF ~~ THEN REPLY @649 GOTO 33
  IF ~~ THEN REPLY @650 GOTO 36
END

IF ~~ THEN BEGIN 35
  SAY @651
  IF ~~ THEN REPLY @652 GOTO 37
  IF ~~ THEN REPLY @653 GOTO 37
END

IF ~~ THEN BEGIN 35a
  SAY @654 = @655
  IF ~~ THEN REPLY @656 GOTO 35
  IF ~~ THEN REPLY @657 GOTO 35b
END

IF ~~ THEN BEGIN 35b
  SAY @658
  IF ~~ THEN GOTO 35
  END

IF ~~ THEN BEGIN 36
  SAY @659
  IF ~~ THEN DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 37
  SAY @660
  IF ~~ THEN GOTO 39
END

IF ~~ THEN BEGIN 39
  SAY @661 = @662 // Seifer's first edit finished - 29th May 2003
  IF ~~ THEN REPLY @663 GOTO 41
  IF ~~ THEN REPLY @664 GOTO 42
  IF ~~ THEN REPLY @665 DO ~IncrementGlobal("KM","GLOBAL",1)~ GOTO 43
  IF ~~ THEN REPLY @666 GOTO 43
END

IF ~~ THEN BEGIN 40
  SAY @667
  IF ~~ THEN DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 41
  SAY @668
  IF ~~ THEN REPLY @669 GOTO 43
  IF ~~ THEN REPLY @670 GOTO 40
END

IF ~~ THEN BEGIN 42
  SAY @671
  IF ~~ THEN REPLY @672 GOTO 43
END

IF ~~ THEN BEGIN 43
  SAY @673 = @674 = @675
  IF ~~ THEN REPLY @676 GOTO 44
  IF ~~ THEN REPLY @677 GOTO 40
  IF ~~ THEN REPLY @678 GOTO 44
END

IF ~~ THEN BEGIN 44
  SAY @679
  IF ~~ THEN REPLY @680 GOTO 45
  IF ~~ THEN REPLY @681 GOTO 45
END

IF ~~ THEN BEGIN 45
  SAY @682 = @683
  IF ~~ THEN REPLY @684 GOTO 46
  IF ~~ THEN REPLY @685 GOTO 47
END

IF ~~ THEN BEGIN 46
  SAY @686
  IF ~~ THEN REPLY @687 GOTO 48
END

IF ~~ THEN BEGIN 47
  SAY @688
  IF ~~ THEN REPLY @689 GOTO 48
END

IF ~~ THEN BEGIN 48
  SAY @690
 IF ~~ THEN EXIT
END

IF WEIGHT #5 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",12)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 49
  SAY @691
  IF ~~ THEN REPLY @692 GOTO 50
  IF ~~ THEN REPLY @693 GOTO 51
END

IF ~~ THEN BEGIN 50
  SAY @694 = @695
  IF ~~ THEN REPLY @696 GOTO 51
  IF ~~ THEN REPLY @697 GOTO 53
  IF ~~ THEN REPLY @698 GOTO 54
END

IF ~~ THEN BEGIN 51
  SAY @699
  IF ~~ THEN REPLY @700 GOTO 52
END

IF ~~ THEN BEGIN 52
  SAY @701
  IF ~~ THEN REPLY @702 GOTO 55
  IF ~~ THEN REPLY @703 GOTO 55
END

IF ~~ THEN BEGIN 53
  SAY @704
  IF ~~ THEN REPLY @705 GOTO 55
END

IF ~~ THEN BEGIN 54
  SAY @706
  IF ~~ THEN REPLY @707 GOTO 55
  IF ~~ THEN REPLY @708 GOTO  55
END

IF ~~ THEN BEGIN 55
  SAY @709
  IF ~~ THEN REPLY @710 GOTO 56
  IF ~~ THEN REPLY @711 GOTO 57
END

IF ~~ THEN BEGIN 56
  SAY @712
  IF ~~ THEN REPLY @713 GOTO 58
END

IF ~~ THEN BEGIN 57
  SAY @714 = @715
  IF ~~ THEN REPLY @716 GOTO 58
END

IF ~~ THEN BEGIN 58
  SAY @717
  IF ~~ THEN EXIT
END

IF WEIGHT #6 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",14)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 59
  SAY @718
  IF ~~ THEN REPLY @719 GOTO 60
  IF ~~ THEN REPLY @720 GOTO 60
END

IF ~~ THEN BEGIN 60
  SAY @721 = @722
  IF ~~ THEN REPLY @723 GOTO 61
  IF ~~ THEN REPLY @724 DO ~IncrementGlobal("KM","GLOBAL",-2)~ GOTO 62
  IF ~~ THEN REPLY @725 GOTO 63
END

IF ~~ THEN BEGIN 61
  SAY @726 = @727
  IF ~~ THEN REPLY @728 GOTO 64
  IF ~~ THEN REPLY @729 GOTO 62
END

IF ~~ THEN BEGIN 62
  SAY @730
  IF ~~ THEN REPLY @731 GOTO 63
  IF ~~ THEN REPLY @732 DO ~SetGlobal("KiaraOut","GLOBAL",1) SetGlobal("KUNHAPPY","GLOBAL",1) LeaveParty() EscapeArea()~ EXIT
END

IF ~~ THEN BEGIN 63
  SAY @733 = @734
  IF ~~ THEN REPLY @735 GOTO 64
  IF ~~ THEN REPLY @736 GOTO 64
END

IF ~~ THEN BEGIN 64
  SAY @737
  IF ~~ THEN EXIT
END

IF WEIGHT #7 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",16)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 65
  SAY @738
  IF ~~ THEN REPLY @739 GOTO 66
  IF ~~ THEN REPLY @740 GOTO 66
  IF ~~ THEN REPLY @741 GOTO 66a
END

IF ~~ THEN BEGIN 66
  SAY @742
  IF ~~ THEN REPLY @743 GOTO 67
  IF ~~ THEN REPLY @744 GOTO 67
  IF ~~ THEN REPLY @745 GOTO 67

END

IF ~~ THEN BEGIN 66a
  SAY @746
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 67
  SAY @747
  IF ~~ THEN REPLY @748 GOTO 69
  IF ~~ THEN REPLY @749 GOTO 66a
  IF ~~ THEN REPLY @750 GOTO 68
END

IF ~~ THEN BEGIN 68
  SAY @751
  IF ~~ THEN REPLY @752 GOTO 68a
  IF ~~ THEN REPLY @753 DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 68a
  SAY @754
  IF ~~ THEN REPLY @755 GOTO 68b
  IF ~~ THEN REPLY @756 DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 68b
  SAY @757
  IF ~~ THEN REPLY @758 GOTO 68c
END

IF ~~ THEN BEGIN 68c
  SAY @759 = @760 = @761
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 69
  SAY @762
  IF ~~ THEN REPLY @763 GOTO 69a
END

IF ~~ THEN BEGIN 69a
  SAY @764
  IF ~~ THEN REPLY @765 GOTO 69b
END

IF ~~ THEN BEGIN 69b
  SAY @766
  IF ~~ THEN EXIT
END

IF WEIGHT #8 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",18)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 70
  SAY @767
  IF ~~ THEN REPLY @768 GOTO 71
  IF ~~ THEN REPLY @769 GOTO 72
END

IF ~~ THEN BEGIN 71
  SAY @770 = @771 = @772
  IF ~~ THEN REPLY @773 GOTO 73
  IF ~~ THEN REPLY @774 GOTO 74
END

IF ~~ THEN BEGIN 72
  SAY @775
  IF ~~ THEN REPLY @776 EXIT
END

IF ~~ THEN BEGIN 73
  SAY @777
  IF ~~ THEN REPLY @778 GOTO 75
  IF ~~ THEN REPLY @779 GOTO 75
END

IF ~~ THEN BEGIN 74
  SAY @780
  IF ~~ THEN REPLY @781 GOTO 75
  IF ~~ THEN REPLY @782 GOTO 73
END

IF ~~ THEN BEGIN 75
  SAY @783 = @784 = @785
IF ~~ THEN REPLY @786 GOTO 76
IF ~~ THEN REPLY @787 GOTO 77
IF ~~ THEN REPLY @788 GOTO 77
END

IF ~~ THEN BEGIN 76
  SAY @789
  IF ~~ THEN GOTO 78
END

IF ~~ THEN BEGIN 77
  SAY @790
  IF ~~ THEN GOTO 78
END

IF ~~ THEN BEGIN 78
SAY @791 = @792 = @793
  IF ~~ THEN REPLY @794 GOTO 78a
  IF ~~ THEN REPLY @795 GOTO 78b
  IF ~~ THEN REPLY @796 GOTO 78c
END

IF ~~ THEN BEGIN 78a
  SAY @797
  IF ~~ THEN REPLY @798 GOTO 78b
  IF ~~ THEN REPLY @796 GOTO 78c
  IF ~~ THEN REPLY @799 GOTO 78d
END

IF ~~ THEN BEGIN 78b
  SAY @800
  IF ~~ THEN REPLY @794 GOTO 78a
  IF ~~ THEN REPLY @796 GOTO 78c
  IF ~~ THEN REPLY @799 GOTO 78d
END

IF ~~ THEN BEGIN 78c
  SAY @801
 IF ~~ THEN REPLY @794 GOTO 78a
 IF ~~ THEN REPLY @795 GOTO 78b
 IF ~~ THEN REPLY @799 GOTO 78d
END

IF ~~ THEN BEGIN 78d
  SAY @802
  IF ~~ THEN EXIT
END

IF WEIGHT #9 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",20)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 79
  SAY @803
IF ~Global("KiaraRomanceActive","GLOBAL",1)
IsValidForPartyDialog("Viconia")~ THEN EXTERN ~BVICONI~ KVADD1
  IF ~OR(2)
!Global("ViconiaRomanceActive","GLOBAL",1)
!IsValidForPartyDialog("Viconia")~ THEN REPLY @804 GOTO 80
  IF ~OR(2)
!Global("ViconiaRomanceActive","GLOBAL",1)
!IsValidForPartyDialog("Viconia")~ THEN REPLY @805 GOTO 87
END

IF ~~ THEN BEGIN 80
  SAY @806 = @807
  IF ~~ THEN DO ~SetGlobal("ZAISTO","GLOBAL",1)~ EXTERN BZAIYA ZaiSto1
END

IF ~~ THEN BEGIN 81
  SAY @808
  IF ~~ THEN  EXIT
END

IF ~~ THEN BEGIN 82
  SAY @809
  IF ~~ THEN REPLY @810 GOTO 83
  IF ~~ THEN REPLY @811 GOTO 84
  IF ~~ THEN REPLY @812 GOTO 84a
END

IF ~~ THEN BEGIN 83
  SAY @813
  IF ~~ THEN REPLY @811 GOTO 84
  IF ~~ THEN REPLY @814 GOTO 84a
  IF ~~ THEN REPLY @815 GOTO 84b
END

IF ~~ THEN BEGIN 84
  SAY @816 = @817
  IF ~~ THEN REPLY @818 GOTO 83
  IF ~~ THEN REPLY @812 GOTO 84a
  IF ~~ THEN REPLY @815 GOTO 84b
  IF ~~ THEN REPLY @819 GOTO 84c
END

IF ~~ THEN BEGIN 84a
  SAY @820
  IF ~~ THEN REPLY @818 GOTO 83
  IF ~~ THEN REPLY @811 GOTO 84
  IF ~~ THEN REPLY @815 GOTO 84b
  IF ~~ THEN REPLY @819 GOTO 84c
END

IF ~~ THEN BEGIN 84b
  SAY @821 = @822
  IF ~~ THEN REPLY @818 GOTO 83
  IF ~~ THEN REPLY @812 GOTO 84a
  IF ~~ THEN REPLY @811 GOTO 84
  IF ~~ THEN REPLY @823 GOTO 84c
END

IF ~~ THEN BEGIN 84c
  SAY @824
  IF ~~ THEN EXIT
END

IF WEIGHT #10 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",22)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 85
  SAY @825
IF ~~ THEN REPLY @826 GOTO 86
IF ~~ THEN REPLY @827 GOTO 86
IF ~~ THEN REPLY @828 GOTO 87
END

IF ~~ THEN BEGIN 86
  SAY @829 = @830 = @831 = @832
IF ~~ THEN REPLY @833 GOTO 88
IF ~~ THEN REPLY @834 GOTO 88a 
IF ~~ THEN REPLY @835 GOTO 88b 
END

IF ~~ THEN BEGIN 87
  SAY @836
  IF ~~ THEN GOTO 86
END

IF ~~ THEN BEGIN 88
  SAY @837
  IF ~~ THEN GOTO 89
END

IF ~~ THEN BEGIN 88a
  SAY @838
IF ~~ THEN GOTO 89
END

IF ~~ THEN BEGIN 88b
  SAY @839
IF ~~ THEN GOTO 89
END

IF ~~ THEN BEGIN 89
  SAY @840 = @841
IF ~~ THEN REPLY @842 GOTO 90
IF ~~ THEN REPLY @843 GOTO 91
END

IF ~~ THEN BEGIN 90
  SAY @844
  IF ~~ THEN REPLY @845 GOTO 91
  IF ~~ THEN REPLY @846 GOTO 91a
END

IF ~~ THEN BEGIN 91
  SAY @847
  IF ~~ THEN REPLY @846 GOTO 91a
  IF ~~ THEN REPLY @848 EXIT
END

IF ~~ THEN BEGIN 91a
  SAY @849
  IF ~~ THEN REPLY @850 GOTO 91
  IF ~~ THEN REPLY @848 EXIT
END

IF WEIGHT #11 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",24)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 92
  SAY @851
  IF ~~ THEN REPLY @852 GOTO 93 
  IF ~~ THEN REPLY @853 GOTO 94
  IF ~~ THEN REPLY @854 GOTO 95
  IF ~~ THEN REPLY @855 GOTO 95
END

IF ~~ THEN BEGIN 93
  SAY @856 = @857
  IF ~~ THEN GOTO 96
END

IF ~~ THEN BEGIN 94
  SAY @858
  IF ~~ THEN GOTO 96
END

IF ~~ THEN BEGIN 95
  SAY @859
  IF ~~ THEN GOTO 96
END

IF ~~ THEN BEGIN 96
  SAY @860 = @861
 IF ~~ THEN REPLY @862 GOTO 97
  IF ~~ THEN REPLY @863 GOTO 97a
  IF ~~ THEN REPLY @864 GOTO 97a
  IF ~~ THEN REPLY @865 GOTO 97b
END

IF ~~ THEN BEGIN 97
  SAY @866
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 97a
  SAY @867 
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 97b
  SAY @868 
  IF ~~ THEN EXIT
END

// UPTO 102
// --------
IF WEIGHT #12 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",26)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 98
  SAY @869 = @870 = @871
  IF ~~ THEN REPLY @872 GOTO 99
  IF ~~ THEN REPLY @873 GOTO 100
  IF ~~ THEN REPLY @874 GOTO 101
  IF ~~ THEN REPLY @875 GOTO 102
  IF ~~ THEN REPLY @876 GOTO 102a
END

IF ~~ THEN BEGIN 99
SAY @877
IF ~~ THEN REPLY @878 DO ~SetGlobal("KiaraChallenge","LOCALS",1)~ GOTO 101
IF ~~ THEN REPLY @879 GOTO 102
IF ~~ THEN REPLY @880 GOTO 102a
END

IF ~~ THEN BEGIN 100
SAY @881
IF ~~ THEN REPLY @882 DO ~SetGlobal("KiaraChallenge","LOCALS",1)~ GOTO 101
IF ~~ THEN REPLY @879 GOTO 102
IF ~~ THEN REPLY @883 GOTO 102a
END

IF ~~ THEN BEGIN 101
SAY @884 = @885 = @886
IF ~~ THEN REPLY @887 DO ~SetGlobal("KiaraChallenge","LOCALS",1)~ GOTO 102c
IF ~~ THEN REPLY @888 GOTO 102b
END

IF ~~ THEN BEGIN 102
SAY @889
IF ~~ THEN REPLY @890 GOTO 101
IF ~~ THEN REPLY @891 GOTO 102a
END

IF ~~ THEN BEGIN 102a
SAY @892
IF ~~ THEN REPLY @893 GOTO 101
IF ~~ THEN REPLY @879 GOTO 102
END

IF ~~ THEN BEGIN 102b
SAY @894
IF ~~ THEN REPLY @895 GOTO 102c
IF ~~ THEN REPLY @896 DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 102c
SAY @897
IF ~~ THEN REPLY @898 GOTO 102d
IF ~~ THEN REPLY @899 GOTO 102e
END

IF ~~ THEN BEGIN 102d
SAY @900
IF ~~ THEN REPLY @901 EXIT
IF ~~ THEN REPLY @902 GOTO 102e
END

IF ~~ THEN BEGIN 102e
SAY @903
IF ~~ THEN REPLY @898 GOTO 102d
IF ~~ THEN REPLY @901 EXIT
END


// UPTO 108
// --------
IF WEIGHT #13 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",28)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 103
  SAY @904
  IF ~~ THEN REPLY @905 DO ~IncrementGlobal("KBored","LOCALS",1)~ GOTO 104
  IF ~~ THEN REPLY @906 GOTO 105 
  IF ~~ THEN REPLY @907 DO ~IncrementGlobal("KBored","LOCALS",1)~ GOTO 106
  IF ~~ THEN REPLY @908 GOTO 107
  IF ~~ THEN REPLY @909 GOTO 107a
  IF ~~ THEN REPLY @910 GOTO 107b
END

IF ~~ THEN BEGIN 104
SAY @911
IF ~~ THEN REPLY @912 GOTO 105
IF ~~ THEN REPLY @913 GOTO 107c
IF ~~ THEN REPLY @914 GOTO 108
END

IF ~~ THEN BEGIN 105
SAY @915 = @916 = @917
IF ~~ THEN REPLY @918 GOTO 107b 
END

IF ~~ THEN BEGIN 106
SAY @919
IF ~~ THEN REPLY @920 GOTO 105
IF ~~ THEN REPLY @908 GOTO 107c
IF ~~ THEN REPLY @909 GOTO 107a
END

IF ~~ THEN BEGIN 107
SAY @921
IF ~~ THEN REPLY @922 GOTO 107e
IF ~~ THEN REPLY @909 GOTO 107a
IF ~~ THEN REPLY @923 GOTO 105
END

IF ~~ THEN BEGIN 107a
SAY @924
IF ~~ THEN REPLY @920 GOTO 105
IF ~~ THEN REPLY @925 DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 107b
SAY @926
IF ~~ THEN REPLY @927 GOTO 107e
END

IF ~~ THEN BEGIN 107c
SAY @928
IF ~~ THEN DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 107d
SAY @929
IF ~~ THEN REPLY @930 DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT 
IF ~~ THEN REPLY @931 GOTO 105 
IF ~~ THEN REPLY @908 GOTO 107
END

IF ~~ THEN BEGIN 107e
SAY @932 = @933
IF ~~ THEN REPLY @934 GOTO 107f
IF ~~ THEN REPLY @935 GOTO 107g
IF ~~ THEN REPLY @936 GOTO 107h
IF ~~ THEN REPLY @937 GOTO 107i
IF ~~ THEN REPLY @938 GOTO 107j
IF ~~ THEN REPLY @939 GOTO 107k
END

IF ~~ THEN BEGIN 107f
SAY @940
IF ~~ THEN REPLY @941 EXIT
END

IF ~~ THEN BEGIN 107g
SAY @942
IF ~~ THEN DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 107h
SAY @943
IF ~~ THEN REPLY @944 GOTO 107l
IF ~~ THEN REPLY @945 GOTO 107l
END

IF ~~ THEN BEGIN 107i
SAY @946
IF ~~ THEN GOTO 107f
END

IF ~~ THEN BEGIN 107j
SAY @947
IF ~~ THEN DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 107k
SAY @948
IF ~~ THEN DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 107l
SAY @949
IF ~~ THEN REPLY @950 GOTO 107f
IF ~~ THEN REPLY @951 GOTO 107m
END

IF ~~ THEN BEGIN 107m
SAY @952
IF ~~ THEN REPLY @953 GOTO 107f
IF ~~ THEN REPLY @954 DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF WEIGHT #14 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",30)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 108
  SAY @955
  IF ~OR(10)
Class(Player1,FIGHTER)
Class(Player1,FIGHTER_MAGE)
Class(Player1,FIGHTER_CLERIC)
Class(Player1,FIGHTER_THIEF)
Class(Player1,RANGER)
Class(Player1,PALADIN)
Class(Player1,MONK)
Class(Player1,FIGHTER_DRUID)
Class(Player1,FIGHTER_MAGE_CLERIC)
ClASS(Player1,FIGHTER_MAGE_THIEF)~ THEN REPLY @956 GOTO 109
   IF ~OR(4)
Class(Player1,MAGE)
Class(Player1,SORCERER)
Class(Player1,CLERIC_MAGE)
Class(Player1,MAGE_THIEF)~ THEN REPLY @956 GOTO 110
    IF ~OR(4)
Class(Player1,CLERIC)
Class(Player1,CLERIC_RANGER)
Class(Player1,CLERIC_THIEF)
Class(Player1,DRUID)~ THEN REPLY @956 GOTO 110a
    IF ~OR(2)
Class(Player1,BARD)
Class(Player1,THIEF)~ THEN REPLY @956 GOTO 110b
  IF ~~ THEN REPLY @957 GOTO 110c
END

IF ~~ THEN BEGIN 109
SAY @958 = @959 = @960 = @961
IF ~~ THEN REPLY @962 GOTO 110d
END

IF ~~ THEN BEGIN 110
SAY @963 = @964
IF ~~ THEN REPLY @962 GOTO 110d
END

IF ~~ THEN BEGIN 110a
SAY @965 = @966
IF ~~ THEN REPLY @962 GOTO 110d
END

IF ~~ THEN BEGIN 110b
SAY @967
IF ~~ THEN REPLY @962 GOTO 110d
END

IF ~~ THEN BEGIN 110c
SAY @968
IF ~~ THEN DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 110d
SAY @969 
IF ~~ THEN EXIT
END

// HERE NEED TO GET AWAY A BIT, IT IS A CHALLENGE BUT NOW WE NEED SOME EMOTIONAL SIDE TOO, BEYOND THE CHALLENGE ITSELF.
// OTHERWISE IT'S A BIT TOO COLD AND DOESN'T SMOOTHLY TRANSFER TO THE NEXT PART.
// You really think that is necessary?  At this point of time, the first night of passion hasn't actually happened yet. The manner that we have followed thus far is quite primal and matches an almost ritualistic mating process.  Here, I envisage the emotion as being restrained by Kiara and only stirring in <CHARNAME>. I'll leave this blank and add a section later on to show you what I mean (Seif)
IF ~~ THEN BEGIN 110e
SAY ~~
IF ~~ THEN REPLY ~~ EXIT
IF ~~ THEN REPLY ~~ EXIT
END

IF ~~ THEN BEGIN 110f
SAY ~~
IF ~~ THEN REPLY ~~ EXIT
IF ~~ THEN REPLY ~~ EXIT
END

IF ~~ THEN BEGIN 110g
SAY ~~
IF ~~ THEN REPLY ~~ EXIT
IF ~~ THEN REPLY ~~ EXIT
END

IF WEIGHT #15 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",32)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 111
  SAY @971
  IF ~~ THEN REPLY @972 GOTO 112
  IF ~~ THEN REPLY @973 GOTO 113
  IF ~~ THEN REPLY @974 GOTO 112
END

IF ~~ THEN BEGIN 112
  SAY @975
  IF ~~ THEN REPLY @976 GOTO 113a
  IF ~~ THEN REPLY @977 GOTO 113b
  IF ~~ THEN REPLY @978 GOTO 113c
END

IF ~~ THEN BEGIN 113
  SAY @979
  IF ~~ THEN REPLY @976 GOTO 113a
  IF ~~ THEN REPLY @980 GOTO 113b
  IF ~~ THEN REPLY @978 GOTO 113c
END

IF ~~ THEN BEGIN 113a
  SAY @981
  IF ~~ THEN REPLY @982 GOTO 113d
  IF ~~ THEN REPLY @978 GOTO 113c
END

IF ~~ THEN BEGIN 113b
  SAY @983
  IF ~~ THEN GOTO 113d
END

IF ~~ THEN BEGIN 113c
  SAY @984
  IF ~~ THEN REPLY @985 GOTO 113d
END

IF ~~ THEN BEGIN 113d
SAY @986
IF ~~ THEN REPLY @987 GOTO 113e
IF ~~ THEN REPLY @988 GOTO 113f
END

IF ~~ THEN BEGIN 113e
SAY @989
IF ~~ THEN REPLY @990 GOTO 113j
IF ~~ THEN REPLY @991 GOTO 113f 
END

IF ~~ THEN BEGIN 113f
SAY @992
IF ~~ THEN REPLY @993 GOTO 113g
IF ~~ THEN REPLY @994 GOTO 113h
IF ~~ THEN REPLY @995 GOTO 113i
END

IF ~~ THEN BEGIN 113g
SAY @996
IF ~~ THEN REPLY @997 GOTO 113h
IF ~~ THEN REPLY @995 GOTO 113i
IF ~~ THEN REPLY @998 GOTO 113k
END

IF ~~ THEN BEGIN 113h
SAY @999 = @1000
IF ~~ THEN DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 113i
SAY @1001
IF ~~ THEN REPLY @1002 GOTO 113k
IF ~~ THEN REPLY @1003 GOTO 113l
END

IF ~~ THEN BEGIN 113j
SAY @1004
IF ~~ THEN GOTO 113f
END

IF ~~ THEN BEGIN 113k
SAY @1005
IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 113l
SAY @1006
IF ~~ THEN DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

// See, here is where we accumulate more of the primal energy, more sexual tension hangs in the air and the player will possibly get the impression a night of passion or some sort of passionate interlude will occur. By keeping the emotion out thus far they may be more susceptible to what comes in Kiara romance II. From the pillow talk session we can begin to add emotion for both of them. Kiara the more so as she will realise the full force of her emotions for <CHARNAME>.

IF WEIGHT #16 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",34)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 114
  SAY @1007
  IF ~!Global("KNOSEX","GLOBAL",1)~ THEN REPLY @1008 GOTO 115
  IF ~Global("KNOSEX","GLOBAL",1)~ THEN REPLY @1008 GOTO 115a
  IF ~~ THEN REPLY @1009 GOTO 116
END

IF ~~ THEN BEGIN 115
  SAY @1010 = @1011 = @1012
   IF ~~ THEN REPLY @1013 DO ~IncrementGlobal("KM","GLOBAL",3)~ GOTO 117
   IF ~~ THEN REPLY @1014 DO ~IncrementGlobal("KM","GLOBAL",-3)~ GOTO 118a
END

IF ~~ THEN BEGIN 115a
  SAY @1015 = @1016 = @1012
   IF ~~ THEN REPLY @1017 DO ~IncrementGlobal("KM","GLOBAL",3)~ GOTO 117
   IF ~~ THEN REPLY @1014 DO ~IncrementGlobal("KM","GLOBAL",-3)~ GOTO 118a
END

IF ~~ THEN BEGIN 116
  SAY @1018
  IF ~~ THEN REPLY @1019 GOTO 115
END

IF ~~ THEN BEGIN 117
  SAY @1020
  IF ~~ THEN REPLY @1021 GOTO 118
END

IF ~~ THEN BEGIN 118
  SAY @1022
  IF ~~ THEN DO ~SetGlobal("LoveTalk","LOCALS",35)~ EXIT
END

IF ~~ THEN BEGIN 118a
  SAY @1023
  IF ~~ THEN DO ~SetGlobal("LoveTalk","LOCALS",35)~ EXIT
END

// Penultimate acting from Kiara.
// ------------------------------
IF WEIGHT #17 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",36)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 119
  SAY @1024 = @1025
  IF ~~ THEN REPLY @1026 GOTO 120
  IF ~~ THEN REPLY @1027 GOTO 121a
  IF ~~ THEN REPLY @1028 GOTO 120
END

IF ~~ THEN BEGIN 120
SAY @1029 = @1030
IF ~~ THEN REPLY @1031 GOTO 121
IF ~~ THEN REPLY @1032 GOTO 121a
END

IF ~~ THEN BEGIN 121
SAY @1033
IF ~~ THEN REPLY @1032 GOTO 121a
 IF ~~ THEN REPLY @1034 DO ~SetGlobal("KiaraRomanceActice","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 121a
SAY @1035
IF ~~ THEN REPLY @1036 GOTO 121b
IF ~~ THEN REPLY @1037 GOTO 121d
END

IF ~~ THEN BEGIN 121b
SAY @1038
IF ~~ THEN REPLY @1039 GOTO 121c
IF ~~ THEN REPLY @1037 GOTO 121d
IF ~~ THEN REPLY @1040 GOTO 121c
END

IF ~~ THEN BEGIN 121c
SAY @1041
IF ~~ THEN REPLY @1042 GOTO 121e
IF ~~ THEN REPLY @1043 GOTO 121f
END

IF ~~ THEN BEGIN 121d
SAY @1044
IF ~~ THEN REPLY @1045 GOTO 121c
IF ~~ THEN REPLY @1046 GOTO 121c
END

IF ~~ THEN BEGIN 121e
SAY @1047 = @1048
IF ~~ THEN REPLY @1049 DO ~SetGlobal("KiaraRomanceActive","GLOBAL",2)~ GOTO 121g 
IF ~~ THEN REPLY @1050 GOTO 121h
IF ~~ THEN REPLY @1051 GOTO 121h
END

IF ~~ THEN BEGIN 121f
SAY @1052
IF ~~ THEN REPLY @1053 GOTO 121e
IF ~~ THEN REPLY @1054 EXIT
END

IF ~~ THEN BEGIN 121g
SAY @1055
IF ~~ THEN REPLY @1056 EXIT 
IF ~~ THEN REPLY @1057 EXIT
END


IF ~~ THEN BEGIN 121h
SAY @1058
IF ~~ THEN REPLY @1049 DO ~SetGlobal("KiaraRomanceActive","GLOBAL",2)~ EXIT 
IF ~~ THEN REPLY @1059 DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END


IF WEIGHT #18 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",38)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 124
  SAY @1060
  IF ~~ THEN REPLY @1061 GOTO 127
  IF ~~ THEN REPLY @1062 GOTO 126
END

IF ~~ THEN BEGIN 126
  SAY @1063 
  IF ~~ THEN REPLY @1064 GOTO 127
  IF ~~ THEN REPLY @1065 DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 127
  SAY @1066
  IF ~~ THEN DO ~StartCutSceneMode() StartCutScene("CUTL1")~ EXIT
END

// THIS is where the emotion should come flooding in. Until now Kiara should have been leading <CHARNAME> on but a night with him makes her realise how far fallen she is for him. It also stands to reason that she recalls what she had with Osan here.

IF WEIGHT #19 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",40)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 129
  SAY @1067
  IF ~~ THEN REPLY @1068 GOTO 129a
END

IF ~~ THEN BEGIN 129a
SAY @1069
IF ~~ THEN REPLY @1070 GOTO 129b
END

IF ~~ THEN BEGIN 129b
SAY @1071
IF ~~ THEN EXIT
END

// Here is where the player will begin to see the emotional development from the pair. <CHARNAME> is open with his emotion as expected but the somewhat cryptic response from Kiara sets the perfect scene for the next LT - Seif

IF WEIGHT #20 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",42)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 129c
  SAY @1072
  IF ~~ THEN REPLY @1073 GOTO 129d
  IF ~~ THEN REPLY @1074 GOTO 129d
  IF ~~ THEN REPLY @1075 GOTO 129d
END

IF ~~ THEN BEGIN 129d
SAY @1076 = @1077 = @1078 
IF ~~ THEN REPLY @1079 GOTO 129e
IF ~~ THEN REPLY @1080 GOTO 129e
END

IF ~~ THEN BEGIN 129e
SAY @1081 = @1082
IF ~~ THEN REPLY @1083 GOTO 129i
IF ~~ THEN REPLY @1084 GOTO 129g
IF ~~ THEN REPLY @1085 GOTO 129h
IF ~~ THEN REPLY @1086 GOTO 129i
IF ~~ THEN REPLY @1087 GOTO 129j
END

IF ~~ THEN BEGIN 129g
SAY @1088 = @1089
IF ~~ THEN DO ~SetGlobal("DemonNotDeal","GLOBAL",2) LeaveParty() StartCutScene("KiaKill")~ EXIT
END

IF ~~ THEN BEGIN 129h
SAY @1090
IF ~~ THEN REPLY @1091 GOTO 129i
IF ~~ THEN REPLY @1092 GOTO 129g
IF ~~ THEN REPLY @1086 GOTO 129i
END

IF ~~ THEN BEGIN 129i
SAY @1093 = @1094 
IF ~~ THEN REPLY @1095 GOTO 129k
IF ~~ THEN REPLY @1096 GOTO 129g
END

IF ~~ THEN BEGIN 129j
SAY @1097 = @1098
IF ~~ THEN REPLY @1099 GOTO  129g
IF ~~ THEN REPLY @1100 GOTO 129i
END

IF ~~ THEN BEGIN 129k
SAY @1101
IF ~~ THEN REPLY @1102 GOTO 129g
IF ~~ THEN REPLY @1103 GOTO 129l 
END

IF ~~ THEN BEGIN 129l
SAY @1104
IF ~~ THEN EXIT
END

//
IF WEIGHT #21 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",44)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 130
  SAY @1105
  IF ~OR(2) Alignment(Player1,MASK_GOOD) Alignment(Player1,MASK_GENEUTRAL)~ THEN REPLY @1106 GOTO 131
  IF ~OR(2) Alignment(Player1,MASK_GOOD) Alignment(Player1,MASK_GENEUTRAL) ~ THEN REPLY @1107 GOTO 131
  IF ~Alignment(Player1,MASK_EVIL)~ THEN REPLY @1108 GOTO 131
  IF ~Alignment(Player1,MASK_EVIL)~ THEN REPLY @1109 GOTO 131
END

IF ~~ THEN BEGIN 131
SAY @1110 = @1111 = @1112 = @1113
IF ~~ THEN GOTO 132
END

IF ~~ THEN BEGIN 132
SAY @1114
IF ~Alignment(Player1,MASK_EVIL)~ THEN REPLY @1115 GOTO 134
IF ~Alignment(Player1,MASK_EVIL)~ THEN REPLY @1116 GOTO 133
IF ~OR(2) Alignment(Player1,MASK_GOOD) Alignment(Player1,MASK_GENEUTRAL)~ THEN REPLY @1117 GOTO 133
IF ~OR(2) Alignment(Player1,MASK_GOOD) Alignment(Player1,MASK_GENEUTRAL)~ THEN REPLY @1118 GOTO 133
END

IF ~~ THEN BEGIN 133
SAY @1119
IF ~OR(2) Alignment(Player1,MASK_GOOD) Alignment(Player1,MASK_GENEUTRAL)~ THEN REPLY @1120 GOTO 134
IF ~OR(2) Alignment(Player1,MASK_GOOD) Alignment(Player1,MASK_GENEUTRAL)~ THEN REPLY @1121 GOTO 135
IF ~Alignment(Player1,MASK_EVIL)~ THEN REPLY @1122 GOTO 135
IF ~Alignment(Player1,MASK_EVIL)~ THEN REPLY @1123 GOTO 135
END

IF ~~ THEN BEGIN 134
SAY @1124
IF ~OR(2) Alignment(Player1,MASK_GOOD) Alignment(Player1,MASK_GENEUTRAL)~ THEN REPLY @1125 GOTO 135
IF ~OR(2) Alignment(Player1,MASK_GOOD) Alignment(Player1,MASK_GENEUTRAL)~ THEN REPLY @1126 GOTO 135
IF ~Alignment(Player1,MASK_EVIL)~ THEN REPLY @1127 GOTO 135
IF ~Alignment(Player1,MASK_EVIL)~ THEN REPLY @1128 GOTO 135
END

IF ~~ THEN BEGIN 135
SAY @1129 = @1130
IF ~OR(2) Alignment(Player1,MASK_GOOD) Alignment(Player1,MASK_GENEUTRAL)~ THEN REPLY @1131 EXIT
IF ~OR(2) Alignment(Player1,MASK_GOOD) Alignment(Player1,MASK_GENEUTRAL)~ THEN REPLY @1132 EXIT
IF ~Alignment(Player1,MASK_EVIL)~ THEN REPLY @1131 EXTERN KIARAJ KEXPLA8
IF ~Alignment(Player1,MASK_EVIL)~ THEN REPLY @1132 EXTERN KIARAJ KEXPLA8
END

// DEMON LORD APPEARANCE

// RESUME ROMANCE KIARA EVIL/P1 EVIL
// ---------------------------------
IF WEIGHT #22 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",46)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 145
  SAY @1133
  IF ~~ THEN REPLY @1134 GOTO 145a
  IF ~~ THEN REPLY @1135 GOTO 145b
  IF ~~ THEN REPLY @1136 GOTO 145a
  IF ~~ THEN REPLY @1137 GOTO 145c
  IF ~~ THEN REPLY @1138 GOTO 145d
END

IF ~~ THEN BEGIN 145a
SAY @1139
IF ~~ THEN REPLY @1140 GOTO 145c
IF ~~ THEN REPLY @1141 GOTO 145f
IF ~~ THEN REPLY @1142 GOTO 145h
END

IF ~~ THEN BEGIN 145b
SAY @1143 = @1144 = @1145
IF ~~ THEN REPLY @1137 GOTO 145g
IF ~~ THEN REPLY @1146 GOTO 145d
IF ~~ THEN REPLY @1142 GOTO 145h
END

IF ~~ THEN BEGIN 145c
SAY @1147 = @1148
IF ~~ THEN DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 145d
SAY @1149 = @1150 = @1148
IF ~~ THEN REPLY @1151 DO ~SetGlobal("DemonNotDeal","GLOBAL",2) LeaveParty() StartCutScene("KiaKill")~ EXIT
IF ~~ THEN REPLY @1152 DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
IF ~~ THEN REPLY @1153 GOTO 145e
END

IF ~~ THEN BEGIN 145e
SAY @1154
IF ~~ THEN DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 145f
SAY @1155 = @1156
IF ~~ THEN REPLY @1157 GOTO 145c
IF ~~ THEN REPLY @1158 GOTO 145i
IF ~~ THEN REPLY @1159 GOTO 145j
END

IF ~~ THEN BEGIN 145g
SAY @1160
IF ~~ THEN REPLY @1161 GOTO 145d
IF ~~ THEN REPLY @1162 GOTO 145h
END

IF ~~ THEN BEGIN 145h
SAY @1163
IF ~~ THEN REPLY @1164 GOTO 145i
IF ~~ THEN REPLY @1165 DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 145i
SAY @1166
IF ~~ THEN REPLY @1167 GOTO 145j
IF ~~ THEN REPLY @1168 GOTO 145k
END

IF ~~ THEN BEGIN 145j
SAY @1169 = @1170
IF ~~ THEN DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN 145k
SAY @1171
IF ~~ THEN EXIT
END

IF WEIGHT #23 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",48)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 146
  SAY @1172
  IF ~!Global("KNOSEX","GLOBAL",1)~ THEN REPLY @1173 DO ~StartCutSceneMode() StartCutScene("CUTL2")~ EXIT
  IF ~Global("KNOSEX","GLOBAL",1)~ THEN REPLY @1173 GOTO 147
  IF ~~ THEN REPLY @1174 EXIT
END

IF ~~ THEN BEGIN 147
SAY @1175  
IF ~~ THEN DO ~SetGlobal("LoveTalk","LOCALS",49)
StartCutSceneMode()
StartCutScene("Cut34a")~ EXIT
END


IF WEIGHT #24 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",50)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 148
  SAY @1176
  IF ~~ THEN REPLY @1177 GOTO 149
  IF ~~ THEN REPLY @1178 GOTO 149
END

IF ~~ THEN BEGIN 149
  SAY @1179
  IF ~~ THEN EXIT
END

// ROMANCE2 PLAYER1_GOOD / KIARA LAWFUL_NEUTRAL
// --------------------------------------------
IF WEIGHT #25 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",82)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 200
  SAY @1133
  IF ~~ THEN REPLY @1134 GOTO 201
  IF ~~ THEN REPLY @1135 GOTO 202
  IF ~~ THEN REPLY @1180 GOTO 203 
  IF ~~ THEN REPLY @1181 GOTO 203
END

IF ~~ THEN BEGIN 201
SAY @1182
IF ~~ THEN REPLY @1183 GOTO 209
IF ~~ THEN REPLY @1184 GOTO 210
IF ~~ THEN REPLY @1185 GOTO 204
END

IF ~~ THEN BEGIN 202
SAY @1143
IF ~~ THEN REPLY @1186 GOTO 204
IF ~~ THEN REPLY @1187 GOTO 205
IF ~~ THEN REPLY @1188 GOTO 204
END

IF ~~ THEN BEGIN 203
SAY @1189
IF ~~ THEN REPLY @1190 GOTO 209
IF ~~ THEN REPLY @1184 GOTO 210
END

IF ~~ THEN BEGIN 204
SAY @1155 = @1156
IF ~~ THEN REPLY @1191 GOTO 205
IF ~~ THEN REPLY @1158 GOTO 206
IF ~~ THEN REPLY @1159 GOTO 206
END

IF ~~ THEN BEGIN 205
SAY @1192
IF ~~ THEN DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END


IF ~~ THEN BEGIN 206
SAY @1193 
IF ~~ THEN REPLY @1194 GOTO 207
IF ~~ THEN REPLY @1195 GOTO 205
END

IF ~~ THEN BEGIN 207
SAY @1166
IF ~~ THEN REPLY @1167 GOTO 205
IF ~~ THEN REPLY @1168 GOTO 208
END

IF ~~ THEN BEGIN 208
SAY @1196  
IF ~~ THEN REPLY @1197 GOTO 209
END

IF ~~ THEN BEGIN 209
SAY @1198
IF ~~ THEN REPLY @1199 GOTO 211
IF ~~ THEN REPLY @1184 GOTO 210
IF ~~ THEN REPLY @1200 GOTO 212
IF ~~ THEN REPLY @1201 GOTO 213
END

IF ~~ THEN BEGIN 210
SAY @1202 = @1203 = @1204 = @1205 = @1206
IF ~~ THEN REPLY @1207 GOTO 209
END

IF ~~ THEN BEGIN 211
SAY @1208 = @1209
IF ~~ THEN REPLY @1210 GOTO 214
IF ~~ THEN REPLY @1211 GOTO  215
IF ~~ THEN REPLY @1212 GOTO  216
IF ~~ THEN REPLY @1213 GOTO 217
IF ~~ THEN REPLY @1214 GOTO 218
IF ~~ THEN REPLY @1215 GOTO 219
END

IF ~~ THEN BEGIN 212
SAY @1216
IF ~~ THEN REPLY @1210 GOTO 214
IF ~~ THEN REPLY @1211 GOTO  215
IF ~~ THEN REPLY @1212 GOTO  216
IF ~~ THEN REPLY @1213 GOTO 217
IF ~~ THEN REPLY @1214 GOTO 218
IF ~~ THEN REPLY @1215 GOTO 219
END

IF ~~ THEN BEGIN 213
SAY @1217 = @1209
IF ~~ THEN REPLY @1210 GOTO 214
IF ~~ THEN REPLY @1211 GOTO  215
IF ~~ THEN REPLY @1212 GOTO  216
IF ~~ THEN REPLY @1213 GOTO 217
IF ~~ THEN REPLY @1214 GOTO 218
IF ~~ THEN REPLY @1215 GOTO 219
END

IF ~~ THEN BEGIN 214
SAY @1218
IF ~~ THEN GOTO 220
END

IF ~~ THEN BEGIN 215
SAY @1219
IF ~~ THEN GOTO 220
END

IF ~~ THEN BEGIN 216
SAY @1220
IF ~~ THEN GOTO 220
END

IF ~~ THEN BEGIN 217
SAY @1221
IF ~~ THEN GOTO 220
END

IF ~~ THEN BEGIN 218
SAY @1222
IF ~~ THEN GOTO 220
END

IF ~~ THEN BEGIN 219
SAY @1223
IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 220
SAY @1224
IF ~~ THEN EXIT
END


IF WEIGHT #26 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",84)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 221
  SAY @1225
  IF ~~ THEN REPLY @1226 DO ~StartCutSceneMode() StartCutScene("CUTL3")~ EXIT
  IF ~~ THEN REPLY @1227 GOTO 222
  IF ~~ THEN REPLY @1228 GOTO 223
  IF ~~ THEN REPLY @1173 DO ~StartCutSceneMode() StartCutScene("CUTL3")~ EXIT  
END

IF ~~ THEN BEGIN 222
SAY @1229
IF ~~ THEN DO ~StartCutSceneMode() StartCutScene("CUTL3")~ EXIT
END

IF ~~ THEN BEGIN 223
SAY @1230
IF ~~ THEN DO ~SetGlobal("LoveTalk","LOCALS",87)~ EXIT
END

IF WEIGHT #27 ~!Global("KiaraRomanceActive","GLOBAL",3)
 Global("LoveTalk","LOCALS",86)
 !StateCheck(Player1,STATE_SLEEPING)~ THEN BEGIN 224
  SAY @1176
  IF ~~ THEN REPLY @1177 GOTO 225
  IF ~~ THEN REPLY @1231 GOTO 225
END

IF ~~ THEN BEGIN 225
  SAY @1179
  IF ~~ THEN EXIT
END



// AT 84 SECOND NIGHT 86 WITH NEXT MORNING.
// ----------------------------------------

// DEMON DEAL
// ----------
IF ~~ THEN BEGIN DEAL8
  SAY @1232
  IF ~~ THEN EXTERN DELORD 12
END

IF ~~ THEN BEGIN DEAL9
  SAY @1233
  IF ~~ THEN REPLY @1234 GOTO DEAL10
  IF ~~ THEN REPLY @1235 GOTO DEAL11
  IF ~~ THEN REPLY @1236 GOTO DEAL12
END

IF ~~ THEN BEGIN DEAL10
  SAY @1237
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN DEAL11
  SAY @1238
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN DEAL12
  SAY @1239
  IF ~~ THEN DO ~~ EXIT
END

// DEMON DEAL VOID JERLIA
// ----------------------
IF ~~ THEN BEGIN KiaJerl1
SAY @1240
IF ~~ THEN REPLY @1241 EXIT
IF ~~ THEN REPLY @1242 EXIT
IF ~~ THEN REPLY @1243 EXIT
END

// ROMANCE DIALOG QUESTS
// VALYKILL
// --------
IF ~~ THEN BEGIN VALYKILL1
SAY @1244
IF ~~ THEN REPLY @1245 DO ~IncrementGlobal("KIACHA","GLOBAL",1)~ GOTO VALYKILL2
IF ~GlobalGT("LoveTalk","LOCALS",12)~ THEN REPLY @1246 DO ~IncrementGlobal("KIACHA","GLOBAL",1)~ GOTO VALYKILL3
IF ~GlobalLT("LoveTalk","LOCALS",14)~ THEN REPLY @1247 DO ~IncrementGlobal("KIACHA","GLOBAL",1)~ GOTO VALYKILL4
END

IF ~~ THEN BEGIN VALYKILL2
SAY @1248
IF ~~ THEN REPLY @1249 GOTO VALYKILL3
END

IF ~~ THEN BEGIN VALYKILL3
SAY @1250 = @1251
IF ~~ THEN REPLY @1252 GOTO VALYKILL5
IF ~~ THEN REPLY @1253 GOTO VALYKILL9
END

IF ~~ THEN BEGIN VALYKILL4
SAY @1254 = @1255
IF ~~ THEN REPLY @1256 GOTO VALYKILL5
IF ~~ THEN REPLY @1253 GOTO VALYKILL9
END

IF ~~ THEN BEGIN VALYKILL5
SAY @1257
IF ~~ THEN REPLY @1258 GOTO VALYKILL9
IF ~~ THEN REPLY @1259 GOTO VALYKILL6
END

IF ~~ THEN BEGIN VALYKILL6
SAY @1260
IF ~~ THEN REPLY @1258 GOTO VALYKILL9
IF ~~ THEN REPLY @1261 GOTO VALYKILL9
END

IF ~~ THEN BEGIN VALYKILL9
SAY @1262
IF ~~ THEN REPLY @1263 DO ~IncrementGlobal("P1GOOD","GLOBAL",3)~ EXTERN VALYGAR 44 
IF ~~ THEN REPLY @1264 DO ~IncrementGlobal("P1EVIL","GLOBAL",3)~ EXTERN VALYGAR 28
END

IF ~~ THEN BEGIN VALYFREE1
SAY @1265
IF ~~ THEN REPLY @1266 DO ~IncrementGlobal("P1EVIL","GLOBAL",3)~ EXTERN VALYGAR 28
IF ~~ THEN REPLY @1267 DO ~IncrementGlobal("P1GOOD","GLOBAL",3)~ EXTERN VALYGAR FREEVALYK1
END

// SVNIRFEBLIN - KILL
// ------------------
IF ~~ THEN BEGIN SVIRKILL1
SAY @1268
IF ~~ THEN REPLY @1269 GOTO SVIRKILL2
IF ~~ THEN REPLY @1270 DO ~IncrementGlobal("P1EVIL","GLOBAL",3)~ EXTERN UDSVIR08 1
IF ~~ THEN REPLY @1271 GOTO SVIRKILL2
END

IF ~~ THEN BEGIN SVIRKILL2
SAY @1272
IF ~GlobalGT("LoveTalk","LOCALS",40)~ THEN GOTO SVIRKILL3
IF ~GlobalLT("LoveTalk","LOCALS",42)~ THEN GOTO SVIRKILL4
END

IF ~~ THEN BEGIN SVIRKILL3
SAY @1273
IF ~~ THEN REPLY @1274 GOTO SVIRKILL5
IF ~~ THEN REPLY @1275 DO ~IncrementGlobal("P1EVIL","GLOBAL",3)~ EXTERN UDSVIR08 1
END

IF ~~ THEN BEGIN SVIRKILL4
SAY @1276
IF ~GlobalGT("LoveTalk","LOCALS",40)~ THEN REPLY @1277 GOTO SVIRKILL6
IF ~GlobalLT("LoveTalk","LOCALS",42)~ THEN REPLY @1278 GOTO SVIRKILL6
IF ~~ THEN REPLY @1279 DO ~IncrementGlobal("P1EVIL","GLOBAL",3)~ EXTERN UDSVIR08 1
END

IF ~~ THEN BEGIN SVIRKILL5
SAY @1280
IF ~~ THEN REPLY @1281 DO ~IncrementGlobal("P1EVIL","GLOBAL",3)~ EXTERN UDSVIR08 1
IF ~~ THEN REPLY @1282 DO ~IncrementGlobal("P1GOOD","GLOBAL",3)~ EXTERN UDSVIR08 5
END

IF ~~ THEN BEGIN SVIRKILL6
SAY @1283
IF ~~ THEN REPLY @1284 DO ~IncrementGlobal("P1GOOD","GLOBAL",3)~ EXTERN UDSVIR08 5
IF ~~ THEN REPLY @1281 DO ~IncrementGlobal("P1EVIL","GLOBAL",3)~ EXTERN UDSVIR08 1
END

// NALIA'S AUNT
// ------------
IF ~~ THEN BEGIN DELCKILL1
SAY @1285
IF ~~ THEN REPLY @1286 DO ~IncrementGlobal("KIACHA","GLOBAL",1) IncrementGlobal("P1EVIL","GLOBAL",1)~ EXTERN Delcia 9
IF ~GlobalGT("Lovetalk","LOCALS",12)~ THEN REPLY @1287 DO ~IncrementGlobal("KIACHA","GLOBAL",1)~ GOTO DELCKILL1a
IF ~GlobalLT("Lovetalk","LOCALS",14)~ THEN REPLY @1287 DO ~IncrementGlobal("KIACHA","GLOBAL",1)~ GOTO DELCKILL3
END

IF ~~ THEN BEGIN DELCKILL1a
SAY @1288
IF ~~ THEN REPLY @1289  DO ~IncrementGlobal("P1EVIL","GLOBAL",1)~ EXTERN Delcia 9
IF ~~ THEN REPLY @1290 GOTO DELCKILL4
IF ~~ THEN REPLY @1291 GOTO DELCKILL3 
END

IF ~~ THEN BEGIN DELCKILL2
SAY @1292
IF ~~ THEN REPLY @1289 DO ~IncrementGlobal("P1EVIL","GLOBAL",1)~ EXTERN Delcia 9
IF ~~ THEN REPLY @1290 GOTO DELCKILL4
IF ~~ THEN REPLY @1293 GOTO DELCKILL3
END

IF ~~ THEN BEGIN DELCKILL3
SAY @1294
IF ~~ THEN REPLY @1295 DO ~IncrementGlobal("P1EVIL","GLOBAL",1)~ EXTERN Delcia 9
IF ~~ THEN REPLY @1296 DO ~IncrementGlobal("P1GOOD","GLOBAL",1)~ EXTERN DELCIA 15
END

IF ~~ THEN BEGIN DELCKILL4
SAY @1297
IF ~~ THEN REPLY @1298 DO ~IncrementGlobal("P1EVIL","GLOBAL",1)~ EXTERN Delcia 9
IF ~~ THEN REPLY @1299 DO ~IncrementGlobal("P1GOOD","GLOBAL",1)~ EXTERN DELCIA 15
END

// VITHAL (Underdark) at 43
// ------------------------
IF ~~ THEN BEGIN UDVITHKILL1
SAY @1300  
IF ~~ THEN REPLY @1301 GOTO UDVITHKILL2
IF ~~ THEN REPLY @1302 GOTO UDVITHKILL3
IF ~~ THEN REPLY @1303 DO ~IncrementGlobal("P1EVIL","GLOBAL",2)~ EXTERN UDVITH 49
END

IF ~~ THEN BEGIN UDVITHKILL2
SAY @1304
IF ~~ THEN REPLY @1305 GOTO UDVITHKILL3
IF ~~ THEN REPLY @1306 GOTO UDVITHKILL4
IF ~~ THEN REPLY @1307 DO ~IncrementGlobal("P1EVIL","GLOBAL",2)~ EXTERN UDVITH 49
END

IF ~~ THEN BEGIN UDVITHKILL3
SAY @1308 = @1309 = @1310
IF ~~ THEN REPLY @1311 GOTO UDVITHKILL5
IF ~~ THEN REPLY @1312 GOTO UDVITHKILL4
IF ~~ THEN REPLY @1313 DO ~IncrementGlobal("P1EVIL","GLOBAL",2)~ EXTERN UDVITH 49
END

IF ~~ THEN BEGIN UDVITHKILL4
SAY @1314 = @1315 = @1316
IF ~~ THEN REPLY @1317 GOTO UDVITHKILL6
IF ~~ THEN REPLY @1318 DO ~IncrementGlobal("P1EVIL","GLOBAL",2)~ EXTERN UDVITH 49
END

IF ~~ THEN BEGIN UDVITHKILL5
SAY @1315 = @1316
IF ~~ THEN REPLY @1319 GOTO UDVITHKILL4
IF ~~ THEN REPLY @1317 GOTO UDVITHKILL6
IF ~~ THEN REPLY @1303 DO ~IncrementGlobal("P1EVIL","GLOBAL",2)~ EXTERN UDVITH 49
END

IF ~~ THEN BEGIN UDVITHKILL6
SAY @1320
IF ~~ THEN REPLY @1321 DO ~IncrementGlobal("P1GOOD","GLOBAL",2)~ EXTERN UDVITH 45
IF ~~ THEN REPLY @1322 DO ~IncrementGlobal("P1GOOD","GLOBAL",2)~ EXTERN UDVITH 44
IF ~~ THEN REPLY @1323 DO ~IncrementGlobal("P1EVIL","GLOBAL",2)~ EXTERN UDVITH 49
END

// Elgea Ransom (Bridge distict) at 2
// ----------------------------------
IF ~~ THEN BEGIN ELGEARANS1
SAY @1324 = @1325 
IF ~~ THEN REPLY @1326 DO ~IncrementGlobal("KIACHA","GLOBAL",1)~ GOTO ELGEARANS2
IF ~~ THEN REPLY @1327 DO ~IncrementGlobal("KIACHA","GLOBAL",1)~ GOTO ELGEARANS3
IF ~~ THEN REPLY @1328 DO ~IncrementGlobal("KIACHA","GLOBAL",1) SetGlobal("KIATEST1","LOCALS",1) IncrementGlobal("P1EVIL","GLOBAL",1)~ EXTERN ELGEA 6
END

IF ~~ THEN BEGIN ELGEARANS2
SAY @1329 = @1330 
IF ~~ THEN REPLY @1327 GOTO ELGEARANS3
IF ~~ THEN REPLY @1331 GOTO ELGEARANS4
IF ~~ THEN REPLY @1332 DO ~SetGlobal("KIATEST1","LOCALS",1) IncrementGlobal("P1EVIL","GLOBAL",1)~ EXTERN ELGEA 6
END

IF ~~ THEN BEGIN ELGEARANS3
SAY @1333 = @1334 
IF ~~ THEN REPLY @1335 GOTO ELGEARANS4
IF ~~ THEN REPLY @1336 GOTO ELGEARANS4
IF ~~ THEN REPLY @1337 DO ~SetGlobal("KIATEST1","LOCALS",1) IncrementGlobal("P1EVIL","GLOBAL",1)~ EXTERN ELGEA 6
END

IF ~~ THEN BEGIN ELGEARANS4
SAY @1338 
IF ~~ THEN REPLY @1339 DO ~SetGlobal("KIATEST1","LOCALS",1) IncrementGlobal("P1EVIL","GLOBAL",1)~ EXTERN ELGEA 6
IF ~~ THEN REPLY @1340 GOTO ELGEARANS5
IF ~~ THEN REPLY @1341 DO ~IncrementGlobal("P1GOOD","GLOBAL",1)~ EXTERN ELGEA 3
END

IF ~~ THEN BEGIN ELGEARANS5
SAY @1342 = @1343
IF ~~ THEN REPLY @1344 GOTO ELGEARANS6
IF ~~ THEN REPLY @1345 DO ~IncrementGlobal("P1GOOD","GLOBAL",1)~ EXTERN ELGEA 3
IF ~~ THEN REPLY @1346 DO ~SetGlobal("KIATEST1","LOCALS",1) IncrementGlobal("P1EVIL","GLOBAL",1)~ EXTERN ELGEA 6
END

IF ~~ THEN BEGIN ELGEARANS6
SAY @1347 = @1348
IF ~~ THEN REPLY @1349 GOTO ELGEARANS7
IF ~~ THEN REPLY @1350 DO ~IncrementGlobal("P1GOOD","GLOBAL",1)~ EXTERN ELGEA 3
IF ~~ THEN REPLY @1346 DO ~SetGlobal("KIATEST1","LOCALS",1) IncrementGlobal("P1EVIL","GLOBAL",1)~ EXTERN ELGEA 6
END

IF ~~ THEN BEGIN ELGEARANS7
SAY @1351
IF ~~ THEN REPLY @1350 DO ~IncrementGlobal("P1GOOD","GLOBAL",1)~ EXTERN ELGEA 3
IF ~~ THEN REPLY @1346 DO ~SetGlobal("KIATEST1","LOCALS",1) IncrementGlobal("P1EVIL","GLOBAL",1)~ EXTERN ELGEA 6
END


// Firkraag at 14
// --------------
IF ~~ THEN BEGIN GARRKILL1
SAY @1352 = @1353 
IF ~~ THEN REPLY @1354 DO ~IncrementGlobal("KIACHA","GLOBAL",1)~ GOTO GARRKILL2
IF ~~ THEN REPLY @1355 DO ~IncrementGlobal("KIACHA","GLOBAL",1)~ GOTO GARRKILL3
IF ~~ THEN REPLY @1356 DO ~IncrementGlobal("KIACHA","GLOBAL",1)~ GOTO GARRKILL3
END

IF ~~ THEN BEGIN GARRKILL2
SAY @1357 
IF ~~ THEN REPLY @1358 DO ~IncrementGlobal("P1GOOD","GLOBAL",3)~ EXTERN FIRKRA02 15
IF ~~ THEN REPLY @1359 GOTO GARRKILL3
END

IF ~~ THEN BEGIN GARRKILL3
SAY @1360 = @1361 
IF ~~ THEN REPLY @1362 DO ~IncrementGlobal("P1GOOD","GLOBAL",3)~ EXTERN FIRKRA02 15
IF ~~ THEN REPLY @1363 GOTO GARRKILL4
IF ~~ THEN REPLY @1364 GOTO GARRKILL5
IF ~~ THEN REPLY @1365 GOTO GARRKILL6
IF ~~ THEN REPLY @1366 DO ~IncrementGlobal("P1EVIL","GLOBAL",3)~ EXTERN FIRKRA02 29 
END

IF ~~ THEN BEGIN GARRKILL4
SAY @1367 
IF ~~ THEN REPLY @1362 DO ~IncrementGlobal("P1GOOD","GLOBAL",3)~ EXTERN FIRKRA02 15
IF ~~ THEN REPLY @1368 GOTO GARRKILL5
IF ~~ THEN REPLY @1369 GOTO GARRKILL6
IF ~~ THEN REPLY @1366 DO ~IncrementGlobal("P1EVIL","GLOBAL",3)~ EXTERN FIRKRA02 29 
END

IF ~~ THEN BEGIN GARRKILL5
SAY @1370 = @1371 
IF ~~ THEN REPLY @1362 DO ~IncrementGlobal("P1GOOD","GLOBAL",3)~ EXTERN FIRKRA02 15
IF ~~ THEN REPLY @1363 GOTO GARRKILL4
IF ~~ THEN REPLY @1372 GOTO GARRKILL6
IF ~~ THEN REPLY @1366 DO ~IncrementGlobal("P1EVIL","GLOBAL",3)~ EXTERN FIRKRA02 29 
END

IF ~~ THEN BEGIN GARRKILL6
SAY @1373 
IF ~~ THEN REPLY @1362 DO ~IncrementGlobal("P1GOOD","GLOBAL",3)~ EXTERN FIRKRA02 15
IF ~~ THEN REPLY @1363 GOTO GARRKILL4
IF ~~ THEN REPLY @1368 GOTO GARRKILL5
IF ~~ THEN REPLY @1366 DO ~IncrementGlobal("P1EVIL","GLOBAL",3)~ EXTERN FIRKRA02 29 
END

// Lesser Demon (drow ritual)
// --------------------------
IF ~~ THEN BEGIN DRAGST1
SAY @1374 
IF ~!Global("KiaraRomanceActive","Global",3)~ THEN REPLY @1375 GOTO DRAGST2
IF ~Global("KiaraRomanceActive","Global",3)~ THEN REPLY @1375 GOTO DRAGST3
IF ~~ THEN REPLY @1376 GOTO DRAGST4
END

IF ~~ THEN BEGIN DRAGST2
SAY @1377 
IF ~~ THEN REPLY @1378 GOTO DRAGST4
IF ~~ THEN REPLY @1379 GOTO DRAGST4
END

IF ~~ THEN BEGIN DRAGST3
SAY @1380
IF ~~ THEN REPLY @1378 GOTO DRAGST4
IF ~~ THEN REPLY @1379 GOTO DRAGST4
END

IF ~~ THEN BEGIN DRAGST4
SAY @1381 = @1382 = @1383 
IF ~!Global("KiaraRomanceActive","Global",3)~ THEN REPLY @1384 GOTO DRAGST5
IF ~Global("KiaraRomanceActive","Global",3)~ THEN REPLY @1384 GOTO DRAGST6
IF ~~ THEN REPLY @1385 GOTO DRAGST10
END

IF ~~ THEN BEGIN DRAGST5
SAY @1386 
IF ~~ THEN REPLY @1387 GOTO DRAGST10
IF ~~ THEN REPLY @1388 GOTO DRAGST7
END

IF ~~ THEN BEGIN DRAGST6
SAY @1389 
IF ~~ THEN REPLY @1390 GOTO DRAGST9 
IF ~~ THEN REPLY @1391 GOTO DRAGST10
END

IF ~~ THEN BEGIN DRAGST7
SAY @1392 
IF ~~ THEN REPLY @1393 GOTO DRAGST10
IF ~~ THEN REPLY @1394 GOTO DRAGST8
END

IF ~~ THEN BEGIN DRAGST8
SAY @1395 = @1396 
IF ~~ THEN REPLY @1397 GOTO DRAGST10
IF ~~ THEN REPLY @1398 DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3) IncrementGlobal("P1GOOD","GLOBAL",2)~ EXTERN UDDEMON 21
END

IF ~~ THEN BEGIN DRAGST9
SAY @1399 
IF ~~ THEN REPLY @1400 GOTO DRAGST10
IF ~~ THEN REPLY @1398 DO ~SetGlobal("KiaraOut","GLOBAL",1) SetGlobal("KiaraLeave","GLOBAL",1) LeaveParty() EscapeArea()~ EXTERN UDDEMON 21
END

IF ~~ THEN BEGIN DRAGST10
SAY @1401
IF ~~ THEN DO ~IncrementGlobal("P1EVIL","GLOBAL",2)~ EXTERN UDDEMON Kiaratrade1
END

// DRIZZT
// ------
IF ~~ THEN BEGIN KILLDRIZZ1
SAY @1402
IF ~Global("KiaraRomanceActive","GLOBAL",2)~ THEN REPLY @1403 GOTO KILLDRIZZ2
IF ~Global("KiaraRomanceActive","GLOBAL",3)~ THEN REPLY @1403 GOTO KILLDRIZZ3
IF ~~ THEN REPLY @1404 GOTO KILLDRIZZ4
IF ~~ THEN REPLY @1405 DO ~IncrementGlobal("P1EVIL","GLOBAL",3)~ EXTERN C6DRIZZ1 5
END

IF ~~ THEN BEGIN KILLDRIZZ2
SAY @1406
IF ~~ THEN REPLY @1407 GOTO KILLDRIZZ5
IF ~~ THEN REPLY @1408 GOTO KILLDRIZZ4
IF ~~ THEN REPLY @1409 DO ~IncrementGlobal("P1EVIL","GLOBAL",3)~ EXTERN C6DRIZZ1 5
END

IF ~~ THEN BEGIN KILLDRIZZ3
SAY @1410
IF ~~ THEN REPLY @1293 GOTO KILLDRIZZ6
IF ~~ THEN REPLY @1411 GOTO KILLDRIZZ5
IF ~~ THEN REPLY @1412 GOTO KILLDRIZZ4
IF ~~ THEN REPLY @1413 DO ~IncrementGlobal("P1EVIL","GLOBAL",3)~ EXTERN C6DRIZZ1 5
END

IF ~~ THEN BEGIN KILLDRIZZ4
SAY @1414 = @1415
IF ~~ THEN REPLY @1416 EXTERN C6DRIZZ1 25
IF ~~ THEN REPLY @1417 GOTO KILLDRIZZ5
IF ~~ THEN REPLY @1418 DO ~IncrementGlobal("P1EVIL","GLOBAL",3)~ EXTERN C6DRIZZ1 5
END

IF ~~ THEN BEGIN KILLDRIZZ5
SAY @1419
IF ~~ THEN REPLY @1420 EXTERN C6DRIZZ1 25
IF ~~ THEN REPLY @1421 GOTO KILLDRIZZ6
IF ~~ THEN REPLY @1422 DO ~IncrementGlobal("P1EVIL","GLOBAL",3)~ EXTERN C6DRIZZ1 5
END


IF ~~ THEN BEGIN KILLDRIZZ6
SAY @1423
IF ~~ THEN REPLY @1424 EXTERN C6DRIZZ1 25
IF ~~ THEN REPLY @1409 DO ~IncrementGlobal("P1EVIL","GLOBAL",3)~ EXTERN C6DRIZZ1 5
END

// BKIARA COMMENTS
// ---------------
IF ~~ THEN BEGIN fortuna2
  SAY @1425
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN Kweak1
  SAY @1426
  IF ~~ THEN REPLY @1427 GOTO kdizzy1
  IF ~~ THEN REPLY @1428 GOTO kdizzy2
END

IF ~~ THEN BEGIN kdizzy1
  SAY @1429
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN kdizzy2
  SAY @1430
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN DangerKiara1 // SLAYER CHANGE1 comments after first change
  SAY @1431
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN DangerKiara2 // SLAYER CHANGE comments
  SAY @1432
  IF ~~ THEN REPLY @1433 DO ~SetGlobal("EndangerLovedOne","GLOBAL",17)~ GOTO chang1
END

IF ~~ THEN BEGIN chang1 // SLAYER CHANGE3 after first attack
  SAY @1434
  IF ~~ THEN DO ~ActionOverride(Player1,ReallyForceSpell(Myself,SLAYER_CHANGE))~ EXIT
END

IF ~~ THEN BEGIN endang1
  SAY @1435
  IF ~~ THEN EXIT
END


IF ~~ THEN BEGIN KIrenGoHell1
  SAY @1436
  IF ~~ THEN EXTERN player1 17
END

IF ~~ THEN BEGIN BIrenLifeTree1 // TREE OF LIFE BEFORE FIGHTING IRENICUS
  SAY @1437
IF ~~ THEN EXTERN Player1 ZIrenLifeTree1
END

IF ~~ THEN BEGIN BIrenLifeTree2
  SAY @1438 
  IF ~~ THEN GOTO BIrenLifeTree3
END

IF ~~ THEN BEGIN BIrenLifeTree2a
  SAY @1439 
  IF ~~ THEN EXTERN Player1 IrenLifeTree2
END

IF ~~ THEN BEGIN BIrenLifeTree3
  SAY @1440 
  IF ~~ THEN EXTERN Player1 IrenLifeTree2
END

IF ~~ THEN BEGIN HellJonC1
  SAY @1441
COPY_TRANS HELLJON 7
END

IF ~~ THEN BEGIN IrenFindHell1
  SAY @1442
COPY_TRANS player1 25
END

IF ~~ THEN BEGIN KVADD2
  SAY @1443 
  IF ~~ THEN EXTERN BVICONI KVADD3
END

IF ~~ THEN BEGIN KVADD4
  SAY @1444 
  IF ~~ THEN DO ~SetGlobal("KiaraRomanceActive","GLOBAL",3)~ EXIT
END

IF ~~ THEN BEGIN KVADD6
  SAY @1445 
  IF ~~ THEN REPLY @1446 GOTO 80
END


IF ~~ THEN BEGIN KAMB3
  SAY @1447 
  IF ~~ THEN EXTERN BODHIAMB KAMB4
END

// BHAALSPAWN FIGHT
// ----------------
IF ~Global("KTRUEEVIL","GLOBAL",1)~ THEN BEGIN KiaBhaalF5
SAY @1465
IF ~~ THEN EXTERN BZAIYA KiaBhaalF6
END

IF ~~ THEN BEGIN KiaBhaalF7
SAY @1466
IF ~~ THEN DO ~ApplySpell(Myself,HELL_GAIN_STR)
ApplySpell(Myself,BARBARIAN_RAGE)
ApplySpell(Myself,4907)	
ApplySpell(Myself,CLERIC_CHAOTIC_COMMANDS)	
ApplySpell(Myself,HELL_GAIN_STR)
ApplySpell(Myself,HELL_GAIN_STR)
ApplySpell(Myself,HELL_GAIN_STR)
ApplySpell(Myself,HELL_GREED_EVIL)
ApplySpell(Myself,HELL_GREED_EVIL)
ApplySpell(Myself,HELL_GREED_EVIL)
ApplySpell(Myself,CLERIC_HEAL)
ApplySpellRES("SNAKE01",Myself)
SetGlobal("KCActive","GLOBAL",1)
LeaveParty()
Enemy()~ EXTERN BZAIYA KiaBhaalF8
END


// VALYGAR-CORRUPT CHARNAME1
// -------------------------
ADD_TRANS_TRIGGER VALYGAR 39 ~OR(2) !InParty("Kiara") GlobalGT("Chapter","GLOBAL",%bg2_chapter_4%)~
EXTEND_TOP VALYGAR 39 // FORCE KILL VALY
  IF ~InParty("Kiara") GlobalLT("Chapter","GLOBAL",%bg2_chapter_5%)~ THEN EXTERN Bkiara VALYKILL1
END

ADD_TRANS_TRIGGER VALYGAR 42 ~OR(2) !InParty("Kiara") GlobalGT("Chapter","GLOBAL",%bg2_chapter_4%)~
EXTEND_TOP VALYGAR 42 // FORCE KILL VALY
  IF ~InParty("Kiara") GlobalLT("Chapter","GLOBAL",%bg2_chapter_5%)~ THEN EXTERN Bkiara VALYKILL1
END

ADD_TRANS_TRIGGER VALYGAR 45 ~OR(2) !InParty("Kiara") GlobalGT("Chapter","GLOBAL",%bg2_chapter_4%)~
EXTEND_TOP VALYGAR 45 // FORCE KILL VALY
  IF ~InParty("Kiara") GlobalLT("Chapter","GLOBAL",%bg2_chapter_5%)~ THEN EXTERN Bkiara VALYKILL1
END

ADD_TRANS_TRIGGER VALYGAR 38 ~OR(2) !InParty("Kiara") GlobalGT("Chapter","GLOBAL",%bg2_chapter_4%)~
EXTEND_TOP VALYGAR 38 // FORCE KILL VALY
  IF ~InParty("Kiara") GlobalLT("Chapter","GLOBAL",%bg2_chapter_5%)~ THEN EXTERN Bkiara VALYFREE1
END

APPEND VALYGAR 
IF ~~ THEN BEGIN FREEVALYK1
SAY @1467
  IF ~~ THEN DO ~SetGlobal("KickedOut","LOCALS",1)
SetDialogue("VALYGARP")
EscapeAreaMove("AR0326",451,233,0)
SetGlobal("ValygarHome","GLOBAL",1)~ UNSOLVED_JOURNAL @1468 EXIT
END
END

// SVNIFERBLIN
// -----------
ADD_TRANS_TRIGGER UDSVIR08 3 ~!InParty("Kiara")~
EXTEND_TOP UDSVIR08 3 // FORCE KILL SVIR
  IF ~InParty("Kiara")~ THEN EXTERN Bkiara SVIRKILL1
END

ADD_TRANS_TRIGGER UDSVIR08 4 ~!InParty("Kiara")~
EXTEND_TOP UDSVIR08 4 // FORCE KILL SVIR
  IF ~InParty("Kiara")~ THEN EXTERN Bkiara SVIRKILL1
END

// NALIA'S AUNT
// ------------
EXTEND_TOP DELCIA 14 // FORCE KILL NALIA'S AUNT
  IF ~InParty("Kiara") GlobalLT("Chapter","GLOBAL",%bg2_chapter_5%)~ THEN EXTERN Bkiara DELCKILL1
END

ADD_TRANS_TRIGGER DELCIA 10 ~OR(2) !InParty("Kiara") GlobalGT("Chapter","GLOBAL",%bg2_chapter_4%)~
EXTEND_TOP DELCIA 10 // FORCE KILL NALIA'S AUNT
  IF ~InParty("Kiara") GlobalLT("Chapter","GLOBAL",%bg2_chapter_5%)~ THEN EXTERN Bkiara DELCKILL1
END

ADD_TRANS_TRIGGER DELCIA 39 ~OR(2) !InParty("Kiara") GlobalGT("Chapter","GLOBAL",%bg2_chapter_4%)~
EXTEND_TOP DELCIA 39 // FORCE KILL NALIA'S AUNT
  IF ~InParty("Kiara") GlobalLT("Chapter","GLOBAL",%bg2_chapter_5%)~ THEN EXTERN Bkiara DELCKILL1
END

ADD_TRANS_TRIGGER DELCIA 12 ~OR(2) !InParty("Kiara") GlobalGT("Chapter","GLOBAL",%bg2_chapter_4%)~
EXTEND_TOP DELCIA 12 // FORCE KILL NALIA'S AUNT
  IF ~InParty("Kiara") GlobalLT("Chapter","GLOBAL",%bg2_chapter_5%)~ THEN EXTERN Bkiara DELCKILL1
END

// VITHAL
// ------
ADD_TRANS_TRIGGER UDVITH 43 ~!InParty("Kiara")~
EXTEND_TOP UDVITH 43 // FORCE KILL VITHAL
  IF ~InParty("Kiara")~ THEN EXTERN Bkiara UDVITHKILL1
END

// ELGEA
// -----
ADD_TRANS_TRIGGER ELGEA 2 ~OR(2) !InParty("Kiara") GlobalGT("Chapter","GLOBAL",%bg2_chapter_4%)~
EXTEND_TOP ELGEA 2 // FORCE RANSOM
  IF ~InParty("Kiara") GlobalLT("Chapter","GLOBAL",%bg2_chapter_5%)~ THEN EXTERN Bkiara ELGEARANS1
END

// FIRKRAAG
// --------
ADD_TRANS_TRIGGER FIRKRA02 14 ~OR(2) !InParty("Kiara") GlobalGT("Chapter","GLOBAL",%bg2_chapter_4%)~
EXTEND_TOP FIRKRA02 14 // FORCE RANSOM
  IF ~InParty("Kiara") GlobalLT("Chapter","GLOBAL",%bg2_chapter_5%)~ THEN EXTERN Bkiara GARRKILL1
END

// Lesser Demon DROW RITUAL
// ------------------------
ADD_TRANS_TRIGGER UDDEMON 20 ~!InParty("Kiara")~
EXTEND_TOP UDDEMON 20 //FORCE TRADE EGGS
  IF ~InParty("Kiara") Dead("Phaere")
                      PartyHasItem("MISC9t")~ THEN EXTERN Bkiara DRAGST1
END

// DRIZZT
// ------
ADD_TRANS_TRIGGER C6DRIZZ1 24 ~!InParty("Kiara")~
EXTEND_TOP C6DRIZZ1 24
IF ~InParty("Kiara")~ THEN EXTERN BKIARA KILLDRIZZ1
END

ADD_TRANS_TRIGGER C6DRIZZ1 28 ~!InParty("Kiara")~
EXTEND_TOP C6DRIZZ1 28
IF ~InParty("Kiara")~ THEN EXTERN BKIARA KILLDRIZZ1
END

ADD_TRANS_TRIGGER C6DRIZZ1 52 ~!InParty("Kiara")~
EXTEND_TOP C6DRIZZ1 52
IF ~InParty("Kiara")~ THEN EXTERN BKIARA KILLDRIZZ1
END

ADD_TRANS_TRIGGER C6DRIZZ1 51 ~!InParty("Kiara")~
EXTEND_TOP C6DRIZZ1 51
IF ~InParty("Kiara")~ THEN EXTERN BKIARA KILLDRIZZ1
END

// PLAYER1
// -------
ADD_TRANS_TRIGGER player1 3 ~!InParty("Kiara")~
EXTEND_TOP player1 3 #1
  IF ~InParty("Kiara") !Dead("Kiara") Global("KCWEAK1","GLOBAL",0)~ THEN DO ~SetGlobal("KCWEAK1","GLOBAL",1) SetGlobal("SelfTalk","GLOBAL",2)~ EXTERN Bkiara Kweak1
END

ADD_TRANS_TRIGGER player1 5 ~!InParty("Kiara")~
EXTEND_TOP player1 5 #1
  IF ~InParty("Kiara") !Dead("Kiara") Global("KCDangerKia1","GLOBAL",0)~ THEN DO ~SetGlobal("KCDangerKia1","GLOBAL",1)~ EXTERN Bkiara DangerKiara1
END

ADD_TRANS_TRIGGER player1 7 ~OR(2) !InParty("Kiara") Global("KiaraRomanceActive","GLOBAL",3)~
EXTEND_TOP player1 7 // ENDANGER LOVED ONE start
  IF ~OR(2)
Global("KiaraRomanceActive","GLOBAL",1)
Global("KiaraRomanceActive","GLOBAL",2)
InParty("Kiara") !Dead("Kiara") Global("KCdangerKia2","GLOBAL",0)~ THEN DO ~SetGlobal("KCDangerKia2","GLOBAL",1)~ EXTERN Bkiara DangerKiara2
END

ADD_TRANS_TRIGGER player1 10 ~OR(2) !InParty("Kiara") Global("KiaraRomanceActive","GLOBAL",3)~
EXTEND_TOP player1 10
  IF ~Global("EndangerLovedOne","GLOBAL",17)
InParty("Kiara") !Dead("Kiara") Global("KCEndang1","GLOBAL",0)~ THEN DO ~SetGlobal("KCEndang1","GLOBAL",1) SetGlobal("DrowTalk","GLOBAL",5)~ EXTERN Bkiara endang1
END

EXTEND_TOP player1 10
  IF ~Global("EndangerLovedOne","GLOBAL",17)
!InParty("Kiara") !Dead("Kiara")~ THEN DO ~SetGlobal("DrowTalk","GLOBAL",5)~ EXTERN player1 12
END

ADD_TRANS_TRIGGER player1 16 ~!InParty("Kiara")~
EXTEND_TOP player1 16 #1
  IF ~InParty("Kiara") !Dead("Kiara") Global("KiGoHell1","GLOBAL",0)~ THEN DO ~SetGlobal("IrenicusBeat","AR2806",2)
SetGlobal("HadPeopleBeforeHell","LOCALS",1) SetGlobal("KiGoHell1","GLOBAL",1)~ EXTERN BKiara KIrenGoHell1
END

ADD_TRANS_TRIGGER player1 25 ~!InParty("Kiara")~
EXTEND_TOP player1 25 #1
  IF ~InParty("Kiara") !Dead("Kiara") Global("KiFindHell1","GLOBAL",0)~ THEN DO ~SetGlobal("KiFindHell1","GLOBAL",1)~ EXTERN BKIARA IrenFindHell1
END

EXTEND_BOTTOM player1 33
  IF ~IsValidForPartyDialog("Kiara")
!Global("KiaraRomanceActive","GLOBAL",2) Global("KiaLifeTree1","GLOBAL",0)~ THEN DO ~SetGlobal("KiaLifeTree1","GLOBAL",1)~ EXTERN player1 IrenLifeTree1
END

ADD_TRANS_TRIGGER helljon 7 ~!IsValidForPartyDialog("Kiara")~
EXTEND_TOP helljon 7 #1
  IF ~InParty("Kiara") !Dead("Kiara") Global("KiaHellJon1","GLOBAL",0)~ THEN DO ~SetGlobal("KiaHellJon1","GLOBAL",1)~ EXTERN BKiara HellJonC1
END

REPLACE player1
  IF ~~ THEN BEGIN 53
    SAY @1469
    IF ~OR(2)
!InParty("Kiara")
!Global("KiaraRomanceActive","GLOBAL",2) Global("KiaLifeTree2","GLOBAL",0)~ THEN DO ~SetGlobal("KiaLifeTree2","GLOBAL",1)~ EXTERN player1 IrenLifeTree2
    IF ~InParty("Kiara") !Dead("Kiara")
Global("KiaraRomanceActive","GLOBAL",2)
Alignment("Kiara",MASK_EVIL) Global("KiaLifeTree3","GLOBAL",0)~ THEN DO ~SetGlobal("KiaLifeTree3","GLOBAL",1)~ EXTERN player1 IrenLifeTree3
    IF ~InParty("Kiara") !Dead("Kiara")
Global("KiaraRomanceActive","GLOBAL",2)
Alignment("Kiara",LAWFUL_NEUTRAL) Global("KiaLifeTree4","GLOBAL",0)~ THEN DO ~SetGlobal("KiaLifeTree4","GLOBAL",1)~ EXTERN player1 IrenLifeTree4
  END
END

// CHAIN
// -----
CHAIN IF WEIGHT #36 ~See("Korgan") 
InParty("Korgan")
!StateCheck("Korgan",STATE_SLEEPING)
Global("KiaraTalkKorgan","LOCALS",0)~ THEN BKIARA Kotalk1
@500 DO ~SetGlobal("KiaraTalkKorgan","LOCALS",1)~ 
== KORGANJ
@1470 
== BKIARA 
@1471
== KORGANJ
@1472
== BKIARA
@1473
== KORGANJ
@1474 
== BKIARA
@501
EXIT


CHAIN IF ~Global("KiaMinsc","GLOBAL",2)~ THEN BKIARA KiaTalkMinsc1
@1450 DO ~SetGlobal("KiaMinsc","GLOBAL",3)~
== MINSCJ
@1475 
== BKIARA 
@1476
== MINSCJ
@1477
== BKIARA
@1478
== MINSCJ
@1479 
== BKIARA
@1451
EXIT


CHAIN IF WEIGHT #28 ~Global("KiaTalkViconia","AR0700",1)~ THEN BKIARA Victalk1
@1452 DO ~SetGlobal("KiaTalkViconia","AR0700",2)~ 
== VICONIJ
@1480 
== BKIARA 
@1481
== VICONIJ
@1482
== BKIARA
@1483
== VICONIJ
@1484 
== BKIARA
@1453
EXIT


CHAIN IF WEIGHT #29 ~Global("KiaTalkNalia","AR0400",1)~ THEN BKIARA Naltalk1
@1454 DO ~SetGlobal("KiaTalkNalia","AR0400",2)~ 
== NALIAJ
@1485 
== BKIARA 
@1486
== NALIAJ
@1487
== BKIARA
@1488
== NALIAJ
@1489 
== BKIARA
@1455
EXIT

CHAIN IF WEIGHT #30 ~Global("KiaTalkJaheira","AR1900",1)~ THEN BKIARA Jahtalk1
@1456 DO ~SetGlobal("KiaTalkJaheira","AR1900",2)~ 
== JAHEIRAJ
@1490 
== BKIARA 
@1491
== JAHEIRAJ
@1492
== BKIARA
@1493
== JAHEIRAJ
@1494
== BKIARA
@1457
EXIT

CHAIN IF WEIGHT #31 ~Global("KiaTalkYoshimo","AR0300",1)~ THEN BKIARA Yoshtalk1
@1458 DO ~SetGlobal("KiaTalkYoshimo","AR0300",2)~ 
== YOSHJ
@1495 
== BKIARA 
@1496
== YOSHJ
@1497
== BKIARA
@1498
== YOSHJ
@1499
== BKIARA
@1500
== YOSHJ 
@1501
== BKIARA
@1459
EXIT

CHAIN IF WEIGHT #37 ~See("Edwin")
InParty("Edwin")
!StateCheck("Edwin",STATE_SLEEPING)	
Global("KiaraTalkEdwin","LOCALS",0)~ THEN BKIARA Edwtalk1
@502 DO ~SetGlobal("KiaraTalkEdwin","LOCALS",1)~
== EDWINJ
@1502 
== BKIARA
@1503
== EDWINJ
@1504
== BKIARA
@1505
== EDWINJ
@1506
== BKIARA
@503
EXIT


CHAIN IF WEIGHT #35 ~See("Valygar")
InParty("Valygar")
!StateCheck("Edwin",STATE_SLEEPING)	
Global("KiaraTalkValy","GLOBAL",0)~ THEN BKIARA Valtalk1
@498 DO ~SetGlobal("KiaraTalkValy","GLOBAL",1)~
== VALYGARJ // This isn't with Valgars character at all.  We need to reword this.  Seifer
@1507 
== BKIARA
@1508
== VALYGARJ
@1509
== BKIARA
@1510
== VALYGARJ
@1511
== BKIARA
@499
EXIT

CHAIN IF WEIGHT #32 ~Global("KiaTalkImoen","AR1600",1)~ THEN BKIARA Imotalk1
@1460 DO ~SetGlobal("KiaTalkImoen","AR1600",2)~ 
== IMOEN2J
@1512 
== BKIARA
@1513
== IMOEN2J
@1514
== BKIARA
@1515
== IMOEN2J
@1516
== BKIARA
@1517
== IMOEN2J
@1518 = @1519 = @1520 = @1521 = @1522
== BKIARA
@1461
EXIT

CHAIN IF ~Global("KeldorTalkKia","GLOBAL",1)~ THEN BKIARA KiaTalkKeldor2
@1523 DO ~SetGlobal("KeldorTalkKia","GLOBAL",2)~ 
== KELDORJ
@1524
== BKIARA
@1525
== KELDORJ
@1526
== BKIARA
@1527
== KELDORJ
@1528
== BKIARA
@1448 
EXIT


CHAIN IF ~Global("KiaMazzy","GLOBAL",1)~ THEN BKIARA KiaTalkMazzy1
@1462 DO ~SetGlobal("KiaMazzy","GLOBAL",2)~
== MAZZYJ
@1529
== BKIARA
@1530
== MAZZYJ
@1531
== BKIARA
@1532
== MAZZYJ
@1533
== BKIARA
@1534
== MAZZYJ
@1535
== BKIARA
@1463 = @1464
EXIT

CHAIN IF WEIGHT #33 ~See("Haerdalis") 
InParty("Haerdalis")
!StateCheck("Haerdalis",STATE_SLEEPING)	
Global("KiaraTalkHaer","LOCALS",0)~ THEN BKIARA Haertalk1
@494 DO ~SetGlobal("KiaraTalkHaer","LOCALS",1)~
== HAERDAJ
@1536
== BKIARA
@1537
== HAERDAJ
@1538
== BKIARA
@1539
== HAERDAJ
@1540
== BKIARA
@1541
== HAERDAJ
@1542
== BKIARA
@1543
== HAERDAJ
@1544
== BKIARA
@495
EXIT


CHAIN IF WEIGHT #34 ~See("Anomen") 
InParty("Anomen")
!StateCheck("Anomen",STATE_SLEEPING)	
Global("KiaraTalkAnom","LOCALS",0)~ THEN BKIARA Anomtalk1
@496 DO ~SetGlobal("KiaraTalkAnom","LOCALS",1)~
== ANOMENJ
@1545
== BKIARA
@1546
== ANOMENJ
@1547
== BKIARA
@1548
== ANOMENJ
@1549
== BKIARA
@1550
== ANOMENJ
@1551
== BKIARA
@497
EXIT

CHAIN IF ~Global("JanTalkKia","GLOBAL",1)~ THEN BKIARA KiaTalkJan2
@1552 DO ~SetGlobal("JanTalkKia","GLOBAL",2)~
== JANJ
@1553
== BKIARA
@1554
== JANJ
@1555
== BKIARA
@1556
== JANJ
@1557
== BKIARA
@1558
== JANJ
@1574 DO ~RandomWalk()~
== BKIARA
@1449 
EXIT

CHAIN IF ~Global("ZaiTalkCernd","GLOBAL",12)~ THEN BKIARA KIACERND1
@1650 DO ~SetGlobal("ZaiTalkCernd","GLOBAL",13)~
== BCERND
@1651
== BKIARA
@1652 = @1653
== BCERND
@1654
== BKIARA
@1655
== BCERND
@1656
== BKIARA
@1657 = @1658
EXIT

CHAIN BZAIYA KiaBhaalF6
@1559
== BKIARA
@1560
== BZAIYA
@1561
== BKIARA
@1562
== BZAIYA
@1563
END BKIARA KiaBhaalF7

// MAZZYJ
// ------
ADD_TRANS_TRIGGER MAZZYJ 46 ~!InParty("Kiara")~
EXTEND_TOP MAZZYJ 46 //BANTER
  IF ~InParty("Kiara") Global("KiaMazzy","GLOBAL",0)~ THEN DO ~SetGlobal("KiaMazzy","GLOBAL",1)~ EXTERN Bkiara KiaTalkMazzy1
END

ADD_TRANS_TRIGGER MAZZYJ 47 ~!InParty("Kiara")~
EXTEND_TOP MAZZYJ 47 //BANTER
  IF ~InParty("Kiara") Global("KiaMazzy","GLOBAL",0)~ THEN DO ~SetGlobal("KiaMazzy","GLOBAL",1)~  EXTERN Bkiara KiaTalkMazzy1
END


// EXTEND
// ------
EXTEND_BOTTOM TRGYP02 2
  IF ~!InPartySlot(LastTalkedToBy,0)
Name("Kiara",LastTalkedToBy)~ THEN EXTERN TRGYP02 fortuna1
END

APPEND TRGYP02
  IF ~~ THEN BEGIN fortuna1
    SAY @1564 = @1565    
  IF ~~ THEN EXTERN BKiara fortuna2
  END
END



APPEND player1
  IF ~~ THEN BEGIN IrenLifeTree1
    SAY @1566
    IF ~~ THEN REPLY @1567 EXTERN BKIARA BIrenLifeTree1
    IF ~~ THEN REPLY @1568 EXTERN BKIARA BIrenLifeTree1
END

  IF ~~ THEN BEGIN IrenLifeTree2
    SAY @1569
    IF ~~ THEN EXIT
  END

  IF ~~ THEN BEGIN IrenLifeTree3
    SAY @1570
    IF ~~ THEN EXTERN BKIARA BIrenLifeTree2
  END

  IF ~~ THEN BEGIN IrenLifeTree4
    SAY @1571
    IF ~~ THEN EXTERN BKIARA BIrenLifeTree2a
  END
END

// APPEND KELDORN
// --------------
APPEND BKELDOR
IF WEIGHT #-99 ~GlobalGT("LADYMARIA","GLOBAL",3)
InParty("Kiara") 
See("Kiara")
!StateCheck("Kiara",STATE_SLEEPING)  
Global("KeldorTalkKia","GLOBAL",0)~ THEN BEGIN KiaTalkKeldor1
SAY @1572 
IF ~~ THEN DO ~SetGlobal("KeldorTalkKia","GLOBAL",1)~ EXTERN BKIARA KiaTalkKeldor2
END
END

APPEND BJAN
IF WEIGHT #-2 ~InParty("Kiara")
See("Kiara")
!StateCheck("Kiara",STATE_SLEEPING)   
Global("JanTalkKia","GLOBAL",0)~ THEN BEGIN KiaTalkJan1
SAY @1573 
IF ~~ THEN DO ~SetGlobal("JanTalkKia","GLOBAL",1)~ EXTERN BKIARA KiaTalkJan2
END
END

APPEND BVICONI
  IF ~~ THEN BEGIN KVADD1
    SAY @1575
    IF ~~ THEN EXTERN BKIARA KVADD2
  END
END

APPEND BVICONI
  IF ~~ THEN BEGIN KVADD3
    SAY @1576
    IF ~~ THEN REPLY @1577 GOTO KVADD5
    IF ~~ THEN REPLY @1578 GOTO KVADD5
    IF ~~ THEN REPLY @1579 EXTERN BKIARA KVADD4
    IF ~~ THEN REPLY @1580 EXTERN BKIARA KVADD4
  END
END

APPEND BVICONI
  IF ~~ THEN BEGIN KVADD5
    SAY @1581
    IF ~~ THEN DO ~SetGlobal("ViconiaRomanceActive","GLOBAL",3)~ EXTERN BKIARA KVADD6
  END
END

// PHAERE
// ------
EXTEND_TOP UDPHAE01 106
  IF ~OR(2)
Global("KiaraRomanceActive","GLOBAL",1)
Global("KiaraRomanceActive","GLOBAL",2)~ THEN REPLY @1582 EXTERN UDPHAE01 110
END

// BODHI TURN KIARA VAMPIRE GRAVEYARD ENTRANCE
// -------------------------------------------
EXTEND_TOP BODHIAMB 5
  IF ~OR(2)
!InParty("Kiara")
!Global("KiaraRomanceActive","GLOBAL",2)~ THEN GOTO 6
END

EXTEND_BOTTOM BODHIAMB 5
  IF ~Global("KiaraRomanceActive","GLOBAL",2)
InParty("Kiara")~ THEN GOTO KAMB1
END

APPEND BODHIAMB
IF ~~ THEN BEGIN KAMB1
  SAY @1583
  IF ~OR(2)
!InPartyAllowDead("Kiara")
Dead("Kiara")~ THEN GOTO 6
  IF ~InPartyAllowDead("Kiara")
!Dead("Kiara")~ THEN GOTO KAMB2
END  
END

APPEND BODHIAMB
IF ~~ THEN BEGIN KAMB2
  SAY @1584
  IF ~~ THEN EXTERN ~BKIARA~ KAMB3
END
END 

APPEND BODHIAMB
IF ~~ THEN BEGIN KAMB4
  SAY @1585
  IF ~~ THEN DO ~ClearAllActions()
StartCutSceneMode()
StartCutScene("KZCut53e")
~  JOURNAL @1586 FLAGS 64 EXIT
END
END

// BODHI TURNED KIARA CRYPT BANTER
// -------------------------------
EXTEND_TOP C6BODHI 21
  IF ~!Global("KiaraVampire","GLOBAL",2)~ THEN GOTO 22
END

EXTEND_BOTTOM C6BODHI 21
  IF ~Global("KiaraVampire","GLOBAL",2)~ THEN GOTO 23
END

EXTEND_TOP C6BODHI 23
IF ~Global("KiaraVampire","GLOBAL",2)~ THEN REPLY @1587 GOTO KCB1
IF ~Global("KiaraVampire","GLOBAL",2)~ THEN REPLY @1588 GOTO KCB1
IF ~Global("KiaraVampire","GLOBAL",2)~ THEN REPLY @1589 GOTO KCB1
IF ~Global("KiaraVampire","GLOBAL",2)~ THEN REPLY @1590 GOTO 24
END

APPEND C6BODHI
IF ~~ THEN BEGIN KCB1
  SAY @1591
  IF ~~ THEN JOURNAL @1592 FLAGS 64 EXTERN ~VAMPKIA~ 0
END
END

APPEND BZAIYA
IF ~~ THEN BEGIN KiaBhaalF8
SAY @1593
IF ~~ THEN DO ~SetGlobal("ZJOINEVIL","GLOBAL",1)
LeaveParty()
Enemy()
ReallyForceSpell(Player1,WIZARD_TELEPORT_FIELD)~ EXIT
END
END

APPEND BZAIYA
IF WEIGHT #99 ~InParty("Zaiya") !Dead("Zaiya") Global("ZAISto","GLOBAL",1)~ THEN BEGIN ZaiSto1
SAY @1594 = @1595 = @1596 = @1597 = @1598 = @1599 = @1600 = @1601
IF ~~ THEN DO ~SetGlobal("ZAISTO","GLOBAL",2)~ EXTERN BKIARA 82
END
END

// Well, I've done what I can and hope that is is sufficient.  Valgar is provoked too easily but we can work on that.
